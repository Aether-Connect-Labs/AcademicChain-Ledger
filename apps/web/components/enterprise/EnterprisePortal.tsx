import { useState, useEffect } from 'react';import { useDropzone } from 'react-dropzone';// CSVReader is not directly used in the provided code, but it's in the original snippet.// import { CSVReader } from 'react-papaparse'; export default function EnterprisePortal() {  const [verificationResults, setResults] = useState<any[]>([]);  const [isProcessing, setIsProcessing] = useState(false);  const { getRootProps, getInputProps } = useDropzone({    accept: {      'text/csv': ['.csv'],      'application/vnd.ms-excel': ['.xls', '.xlsx']    },    maxFiles: 1,    onDrop: (acceptedFiles) => {      if (acceptedFiles.length > 0) {        handleVerifyBatch(acceptedFiles[0]);      }    }  });  const handleVerifyBatch = async (file: File) => {    setIsProcessing(true);    const formData = new FormData();    formData.append('file', file);        try {      const response = await fetch('/api/enterprise/verify-batch', {        method: 'POST',        headers: {          'Authorization': `Bearer ${localStorage.getItem('enterpriseToken')}`        },        body: formData      });            const data = await response.json();      setResults(data.results);    } catch (error) {      console.error('Batch verification failed:', error);    } finally {      setIsProcessing(false);    }  };  const convertToCSV = (data: any[]) => {    const header = Object.keys(data[0]).join(',');    const rows = data.map(row => Object.values(row).join(','));    return [header, ...rows].join('\n');  };  const downloadCSV = (csvContent: string, fileName: string) => {    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });    const link = document.createElement('a');    if (link.download !== undefined) {      const url = URL.createObjectURL(blob);      link.setAttribute('href', url);      link.setAttribute('download', fileName);      link.style.visibility = 'hidden';      document.body.appendChild(link);      link.click();      document.body.removeChild(link);    }  };  return (    <div className="max-w-6xl mx-auto p-6">      <h1 className="text-3xl font-bold mb-6">Enterprise Verification Portal</h1>            <div {...getRootProps()} className="border-2 border-dashed p-8 mb-6 text-center cursor-pointer">        <input {...getInputProps()} />        <p>Drag & drop a CSV file here, or click to select</p>        <p className="text-sm text-gray-500">Format: credentialId,studentName,verificationPurpose</p>      </div>            {isProcessing && (        <div className="text-center py-8">          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div>          <p>Processing batch verification...</p>        </div>      )}            {verificationResults.length > 0 && (        <div className="mt-6">          <h2 className="text-xl font-semibold mb-4">Verification Results</h2>          <div className="overflow-x-auto">            <table className="min-w-full bg-white">              <thead>                <tr>                  <th className="py-2 px-4 border">Credential ID</th>                  <th className="py-2 px-4 border">Student</th>                  <th className="py-2 px-4 border">Status</th>                  <th className="py-2 px-4 border">Details</th>                </tr>              </thead>              <tbody>                {verificationResults.map((result, index) => (                  <tr key={index} className={index % 2 === 0 ? 'bg-gray-50' : ''}>                    <td className="py-2 px-4 border">{result.credentialId}</td>                    <td className="py-2 px-4 border">{result.studentName}</td>                    <td className="py-2 px-4 border">                      <span className={`inline-block px-2 py-1 rounded text-xs ${                        result.valid ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'                      }`}>                        {result.valid ? 'Valid' : 'Invalid'}                      </span>                    </td>                    <td className="py-2 px-4 border">{result.details}</td>                  </tr>                ))}              </tbody>            </table>          </div>          <div className="mt-4 flex justify-end">            <button               onClick={() => {                const csv = convertToCSV(verificationResults);                downloadCSV(csv, 'verification-results.csv');              }}              className="bg-blue-600 text-white px-4 py-2 rounded"            >              Export Results            </button>          </div>        </div>      )}    </div>  );}