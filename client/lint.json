[{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\AppRoutes.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\authService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\babel.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AccessibleList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminAlerts.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminAnalytics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminReports.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminSidebar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AdminUsage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AnalyticsEvent.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ApiDocsLanding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ApprovedInstitutions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\AuthCallback.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\BatchIssuance.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\BatchIssuancePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\BlockchainStatus.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CTASection.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used.","line":21,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/components/landing/CTASection.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useInView } from 'react-intersection-observer';\r\nimport { useAnalytics } from './useAnalytics';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { theme } from './themeConfig';\r\nimport { ShieldCheck, Wrench, Book, CircleDollarSign } from 'lucide-react';\r\n\r\nconst CTASection = ({ \r\n  variant = 'primary', \r\n  title = null,\r\n  subtitle = null,\r\n  showDemoForm = false \r\n}) => {\r\n  const [email, setEmail] = useState('');\r\n  const [institution, setInstitution] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [submitStatus, setSubmitStatus] = useState(null);\r\n  const { trackButtonClick, trackFormSubmission } = useAnalytics();\r\n  const [animatedSubtitle, setAnimatedSubtitle] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  // Observer para animaciones\r\n  const [ref, inView] = useInView({\r\n    threshold: 0.1,\r\n    triggerOnce: true\r\n  });\r\n\r\n  // Configuraciones por variante\r\n  const variants = {\r\n    primary: {\r\n      bg: 'bg-gradient-to-br from-[#020617] via-[#0b1b3a] to-[#0a0f1f]',\r\n      text: 'text-white',\r\n      button: 'bg-[#0066FF] text-white hover:bg-[#0057d6]',\r\n      secondaryButton: 'border-2 border-white text-white hover:bg-white hover:text-[#0066FF]'\r\n    },\r\n    secondary: {\r\n      bg: 'bg-gradient-to-br from-[#020617] to-[#0b1b3a]',\r\n      text: 'text-white',\r\n      button: 'bg-[#0066FF] text-white hover:bg-[#0057d6]',\r\n      secondaryButton: 'border-2 border-[#0066FF] text-[#cde0ff] hover:bg-[#0066FF] hover:text-white'\r\n    },\r\n    light: {\r\n      bg: 'bg-gradient-to-br from-gray-50 to-blue-50',\r\n      text: 'text-gray-900',\r\n      button: 'bg-[#0066FF] text-white hover:bg-[#0057d6]',\r\n      secondaryButton: 'border-2 border-[#0066FF] text-[#0066FF] hover:bg-[#0066FF] hover:text-white'\r\n    }\r\n  };\r\n\r\n  const currentVariant = variants[variant] || variants.primary;\r\n\r\n  // Contenido por defecto\r\n  const defaultContent = {\r\n    primary: {\r\n      title: 'Blindaje Total contra el Fraude Acad√©mico',\r\n      subtitle: 'Fe p√∫blica digital con garant√≠a perpetua y est√°ndar global para credenciales verificables.',\r\n      primaryButton: 'üöÄ Comenzar Gratis',\r\n      secondaryButton: 'üìÖ Agendar Demo',\r\n      features: [\r\n        'Activaci√≥n en minutos',\r\n        'Soporte 24/7',\r\n        'Sin costos ocultos',\r\n        'Integraci√≥n asegurada'\r\n      ]\r\n    },\r\n    secondary: {\r\n      title: 'Garant√≠a de Autoridad Inquebrantable',\r\n      subtitle: 'T√≠tulos con verificaci√≥n instant√°nea y trazabilidad forense, sin complejidad t√©cnica.',\r\n      primaryButton: 'üè´ Registrar Instituci√≥n',\r\n      secondaryButton: 'üìö Ver Casos de √âxito',\r\n      features: [\r\n        'Alta disponibilidad',\r\n        'Verificaci√≥n en segundos',\r\n        'Cero mantenimiento oculto',\r\n        'Cumplimiento internacional'\r\n      ]\r\n    },\r\n    light: {\r\n      title: 'Transforma tu Instituci√≥n Hoy',\r\n      subtitle: 'Prueba AcademicChain y certifica con fe p√∫blica digital sin fricci√≥n.',\r\n      primaryButton: 'üéØ Probar Demo',\r\n      secondaryButton: 'üìû Contactar Ventas',\r\n      features: [\r\n        'Demo interactiva incluida',\r\n        'Migraci√≥n asistida',\r\n        'Training completo',\r\n        'ROI garantizado'\r\n      ]\r\n    }\r\n  };\r\n\r\n  const content = defaultContent[variant] || defaultContent.primary;\r\n\r\n  // Contador animado de instituciones\r\n  const [institutionCount, setInstitutionCount] = useState(0);\r\n  useEffect(() => {\r\n    if (inView) {\r\n      const target = 57; // N√∫mero real de instituciones\r\n      const duration = 2000;\r\n      const steps = 60;\r\n      const increment = target / steps;\r\n      let current = 0;\r\n\r\n      const timer = setInterval(() => {\r\n        current += increment;\r\n        if (current >= target) {\r\n          setInstitutionCount(target);\r\n          clearInterval(timer);\r\n        } else {\r\n          setInstitutionCount(Math.floor(current));\r\n        }\r\n      }, duration / steps);\r\n\r\n      return () => clearInterval(timer);\r\n    }\r\n  }, [inView]);\r\n\r\n  // Efecto de m√°quina de escribir para el subt√≠tulo\r\n  useEffect(() => {\r\n    if (inView && (subtitle || content.subtitle)) {\r\n      const fullText = subtitle || content.subtitle;\r\n      setAnimatedSubtitle(fullText);\r\n    }\r\n  }, [inView, subtitle, content.subtitle]);\r\n\r\n\r\n  \r\n\r\n  const handleDemoSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      trackFormSubmission({\r\n        formType: 'demo_request',\r\n        email: email,\r\n        institution: institution,\r\n        variant: variant\r\n      });\r\n\r\n      // Simular env√≠o a API\r\n      await new Promise(resolve => setTimeout(resolve, 1500));\r\n      \r\n      // Aqu√≠ ir√≠a la llamada real a la API\r\n      // await api.submitDemoRequest({ email, institution });\r\n      \r\n      setSubmitStatus('success');\r\n      setEmail('');\r\n      setInstitution('');\r\n      \r\n      trackButtonClick({\r\n        buttonType: 'demo_submit',\r\n        variant: variant,\r\n        section: 'cta',\r\n        action: 'demo_submitted'\r\n      });\r\n\r\n    } catch (error) {\r\n      setSubmitStatus('error');\r\n      console.error('Error submitting demo request:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section \r\n      ref={ref}\r\n      className={`section-padding ${currentVariant.bg} ${currentVariant.text} relative overflow-hidden`}\r\n      style={{ paddingBottom: theme.spacing.sectionPb }}\r\n    >\r\n      <div className=\"absolute inset-0 opacity-20 pointer-events-none\">\r\n        <div className=\"absolute top-10 left-10 w-24 h-24 rounded-full bg-white/5 blur-2xl\"></div>\r\n        <div className=\"absolute top-20 right-20 w-32 h-32 rounded-full bg-white/10 blur-2xl\"></div>\r\n        <div className=\"absolute bottom-24 left-1/4 w-28 h-28 rounded-full bg-white/5 blur-2xl\"></div>\r\n        <div className=\"absolute bottom-10 right-1/3 w-36 h-36 rounded-full bg-white/10 blur-2xl\"></div>\r\n      </div>\r\n\r\n      <div className=\"container-responsive relative z-10\">\r\n        <div className={`max-w-6xl mx-auto text-center transition-all duration-700 ${\r\n          inView ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'\r\n        }`}>\r\n          \r\n          {/* Badge de confianza */}\r\n          <div className=\"badge badge-success mb-8 inline-flex items-center\">\r\n            <div className=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse\"></div>\r\n            <span className=\"text-sm font-medium\">\r\n              <span className=\"font-bold\">{institutionCount}+</span> Instituciones Conf√≠an en Nosotros\r\n            </span>\r\n          </div>\r\n\r\n          {/* T√≠tulo principal */}\r\n          <h2 className=\"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight\">\r\n            {title || content.title}\r\n          </h2>\r\n\r\n          {/* Subt√≠tulo */}\r\n          <p className=\"text-xl md:text-2xl opacity-90 mb-12 max-w-3xl mx-auto leading-relaxed min-h-[3em]\">\r\n            {animatedSubtitle}\r\n            <span className=\"inline-block w-1 h-7 ml-1 bg-current animate-pulse\" style={{ animation: 'blink 1s step-end infinite' }}></span>\r\n          </p>\r\n\r\n          {/* Caracter√≠sticas r√°pidas */}\r\n          <div className=\"flex flex-wrap justify-center gap-6 mb-12\">\r\n            {content.features.map((feature, index) => (\r\n              <div \r\n                key={index}\r\n                className=\"flex items-center space-x-2 bg-white/10 backdrop-blur-sm px-4 py-3 rounded-lg\"\r\n              >\r\n                <span className=\"text-green-300\">‚úì</span>\r\n                <span className=\"font-medium\">{feature}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n\r\n\r\n          {/* Formulario de demo (condicional) */}\r\n          {(showDemoForm || submitStatus) && (\r\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md mx-auto border border-white/20\">\r\n              {submitStatus === 'success' ? (\r\n                <div className=\"text-center\">\r\n                  <div className=\"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                    <span className=\"text-2xl text-white\">‚úì</span>\r\n                  </div>\r\n                  <h3 className=\"text-xl font-bold mb-2\">¬°Solicitud Recibida!</h3>\r\n                  <p className=\"opacity-90 mb-4\">\r\n                    Te contactaremos en menos de 24 horas para agendar tu demo personalizada.\r\n                  </p>\r\n                  <button\r\n                    onClick={() => setSubmitStatus(null)}\r\n                    className=\"text-blue-300 hover:text-white underline\"\r\n                  >\r\n                    Cerrar\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <h3 className=\"text-xl font-bold mb-4 text-center\">\r\n                    Agenda una Demo Personalizada\r\n                  </h3>\r\n                  <form onSubmit={handleDemoSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        placeholder=\"tu.email@institucion.edu\"\r\n                        className=\"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/30 placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={institution}\r\n                        onChange={(e) => setInstitution(e.target.value)}\r\n                        placeholder=\"Nombre de tu instituci√≥n\"\r\n                        className=\"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/30 placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <button\r\n                      type=\"submit\"\r\n                      disabled={isSubmitting}\r\n                      className=\"w-full btn-secondary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 hover-lift shadow-soft\"\r\n                    >\r\n                      {isSubmitting ? (\r\n                        <>\r\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\r\n                          <span>Enviando...</span>\r\n                        </>\r\n                      ) : (\r\n                        <span>üéØ Solicitar Demo Gratuita</span>\r\n                      )}\r\n                    </button>\r\n                  </form>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-12 pt-8 border-t border-white/20\">\r\n            <p className=\"text-sm opacity-75 mb-6 uppercase tracking-wider\">\r\n              Incluye sin costo adicional\r\n            </p>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6 text-sm\">\r\n              <div className=\"flex items-center justify-center space-x-2\">\r\n                <ShieldCheck className=\"w-4 h-4 text-green-300\" />\r\n                <span>Soporte 24/7</span>\r\n              </div>\r\n              <div className=\"flex items-center justify-center space-x-2\">\r\n                <Wrench className=\"w-4 h-4 text-green-300\" />\r\n                <span>Migraci√≥n Asistida</span>\r\n              </div>\r\n              <div className=\"flex items-center justify-center space-x-2\">\r\n                <Book className=\"w-4 h-4 text-green-300\" />\r\n                <span>Training Completo</span>\r\n              </div>\r\n              <div className=\"flex items-center justify-center space-x-2\">\r\n                <CircleDollarSign className=\"w-4 h-4 text-green-300\" />\r\n                <span>Sin Costos Ocultos</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Garant√≠a */}\r\n          <div className=\"mt-8 p-4 bg-white/5 rounded-xl border border-white/10\">\r\n            <p className=\"text-sm opacity-80\">\r\n              <strong className=\"opacity-100\">Garant√≠a de satisfacci√≥n:</strong> Si en los primeros 30 d√≠as no \r\n              est√°s completamente satisfecho, te ayudamos a migrar tus datos sin costo.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Efecto de part√≠culas decorativas */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        {[...Array(20)].map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"absolute w-2 h-2 bg-white/30 rounded-full animate-float\"\r\n            style={{\r\n              left: `${Math.random() * 100}%`,\r\n              top: `${Math.random() * 100}%`,\r\n              animationDelay: `${Math.random() * 5}s`,\r\n              animationDuration: `${10 + Math.random() * 10}s`\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\n// Animaci√≥n CSS para las part√≠culas\r\nconst styles = `\r\n@keyframes float {\r\n  0%, 100% { transform: translateY(0) rotate(0deg); }\r\n  50% { transform: translateY(-20px) rotate(180deg); }\r\n}\r\n.animate-float {\r\n  animation: float linear infinite;\r\n}\r\n@keyframes blink {\r\n  from, to { opacity: 1 }\r\n  50% { opacity: 0 }\r\n}\r\n`;\r\n\r\n// Inject styles\r\nif (typeof document !== 'undefined') {\r\n  const styleSheet = document.createElement('style');\r\n  styleSheet.innerText = styles;\r\n  document.head.appendChild(styleSheet);\r\n}\r\n\r\nexport default CTASection;\r\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CertificateDesigner.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'mockCredentials' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'setText' is assigned a value but never used.","line":16,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'setColor' is assigned a value but never used.","line":17,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'setFontSize' is assigned a value but never used.","line":18,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":31},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":119,"column":5,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":169,"endColumn":6},{"ruleId":"no-unused-vars","severity":1,"message":"'isProcessing' is assigned a value but never used.","line":425,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":425,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'showCanvaInput' is assigned a value but never used.","line":426,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":426,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'handleCanvaImport' is assigned a value but never used.","line":428,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":428,"endColumn":26},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data?.designStructure' and 'loadDefaultDesign'. Either include them or remove the dependency array.","line":504,"column":6,"nodeType":"ArrayExpression","endLine":504,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [data?.designStructure, fabricCanvas, loadDefaultDesign]","fix":{"range":[18167,18181],"text":"[data?.designStructure, fabricCanvas, loadDefaultDesign]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'saveHistory'. Either include it or remove the dependency array.","line":544,"column":6,"nodeType":"ArrayExpression","endLine":544,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [fabricCanvas, saveHistory]","fix":{"range":[19614,19628],"text":"[fabricCanvas, saveHistory]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fabricCanvas' and 'selectedObject'. Either include them or remove the dependency array.","line":771,"column":6,"nodeType":"ArrayExpression","endLine":771,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [color, fabricCanvas, fontSize, selectedObject]","fix":{"range":[27421,27438],"text":"[color, fabricCanvas, fontSize, selectedObject]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'deleteSelected'. Either include it or remove the dependency array.","line":995,"column":6,"nodeType":"ArrayExpression","endLine":995,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [deleteSelected, fabricCanvas, selectedObject]","fix":{"range":[34549,34579],"text":"[deleteSelected, fabricCanvas, selectedObject]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'scaleX' is assigned a value but never used.","line":1042,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1042,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'qrSize' is assigned a value but never used.","line":2103,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":2103,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react';\nimport { Canvas, IText, Rect, Shadow, Image as FabricImage } from 'fabric';\nimport { toast } from 'react-hot-toast';\nimport { motion } from 'framer-motion';\nimport { Trash2, FileText, Upload, LayoutTemplate, Type, FileUp, ChevronUp, ChevronDown, Lock, Unlock, Eye, EyeOff, BringToFront, SendToBack, Image as ImageIcon, MousePointer2, PenTool, Stamp, AlignHorizontalJustifyCenter, AlignVerticalJustifyCenter, ArrowRightFromLine, ArrowDownFromLine, Undo2, Redo2 } from 'lucide-react';\nimport n8nService from './services/n8nService';\nimport { mockCredentials, templates } from '../utils/mockData';\n\nconst CertificateDesigner = ({ onClose, onSave, onNavigate, data = {} }) => {\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const [fabricCanvas, setFabricCanvas] = useState(null);\n  const [pageSize, setPageSize] = useState('Landscape');\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [activeTooltip, setActiveTooltip] = useState(null);\n  const [text, setText] = useState('Nuevo Texto');\n  const [color, setColor] = useState('#000000');\n  const [fontSize, setFontSize] = useState(24);\n\n  /* Search & Template State */\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeCategory, setActiveCategory] = useState('All');\n  const [customTemplates, setCustomTemplates] = useState([]);\n  const [docType, setDocType] = useState('Certificado');\n  const [signatures, setSignatures] = useState([]);\n  const [, setForceUpdate] = useState(0); // For real-time property updates\n\n  /* Layer State */\n  const [layers, setLayers] = useState([]);\n\n  /* History State (Undo/Redo) */\n  const [history, setHistory] = useState([]);\n  const [redoHistory, setRedoHistory] = useState([]);\n  const [isHistoryProcessing, setIsHistoryProcessing] = useState(false);\n  const skipHistoryRef = useRef(false);\n\n  const saveHistory = () => {\n    if (!fabricCanvas || isHistoryProcessing || skipHistoryRef.current) return;\n    try {\n        const json = JSON.stringify(fabricCanvas.toJSON(['data', 'selectable', 'evented', 'lockMovementX', 'lockMovementY', 'lockScalingX', 'lockScalingY', 'lockRotation', 'id', 'name']));\n        \n        setHistory(prev => {\n            // Avoid duplicates if nothing changed\n            if (prev.length > 0 && prev[prev.length - 1] === json) return prev;\n            \n            const newHistory = [...prev, json];\n            if (newHistory.length > 30) newHistory.shift(); // Limit to 30 steps\n            return newHistory;\n        });\n        setRedoHistory([]); // Clear redo on new change\n    } catch (e) {\n        console.error(\"Error saving history\", e);\n    }\n  };\n\n  const undo = () => {\n    if (history.length <= 1 || !fabricCanvas) return; // Need at least current state + 1 previous\n    \n    setIsHistoryProcessing(true);\n    \n    // Current state is at history[length-1]\n    // We want to go to history[length-2]\n    const currentState = history[history.length - 1];\n    const previousState = history[history.length - 2];\n    \n    setRedoHistory(prev => [...prev, currentState]);\n    setHistory(prev => prev.slice(0, -1));\n    \n    fabricCanvas.loadFromJSON(previousState, () => {\n        fabricCanvas.renderAll();\n        updateLayers();\n        setIsHistoryProcessing(false);\n        toast.success('Deshacer realizado');\n    });\n  };\n\n  const redo = () => {\n    if (redoHistory.length === 0 || !fabricCanvas) return;\n    \n    setIsHistoryProcessing(true);\n    \n    const nextState = redoHistory[redoHistory.length - 1];\n    \n    setHistory(prev => [...prev, nextState]);\n    setRedoHistory(prev => prev.slice(0, -1));\n    \n    fabricCanvas.loadFromJSON(nextState, () => {\n        fabricCanvas.renderAll();\n        updateLayers();\n        setIsHistoryProcessing(false);\n        toast.success('Rehacer realizado');\n    });\n  };\n\n  const updateLayers = () => {\n    if (fabricCanvas) {\n      const objects = fabricCanvas.getObjects();\n      // Reverse to show top layer first in list\n      setLayers([...objects].reverse());\n      setForceUpdate(prev => prev + 1);\n    }\n  };\n\n  const getLayerName = (obj) => {\n    if (obj.data?.name) return obj.data.name;\n    if (obj.data?.isBackground) return 'Fondo del Documento';\n    if (obj.data?.isQR) return 'QR de Verificaci√≥n';\n    if (obj.data?.dataType === 'competence') return `üß† Comp: ${obj.text?.substring(0, 10)}...`;\n    if (obj.data?.dataType === 'project') return `üöÄ Proj: ${obj.text?.substring(0, 10)}...`;\n    if (obj.text) return obj.text.length > 20 ? obj.text.substring(0, 20) + '...' : obj.text;\n    if (obj.type === 'image') return 'Imagen / Logo';\n    if (obj.type === 'rect') return 'Forma (Rect√°ngulo)';\n    return `Elemento ${obj.type}`;\n  };\n\n  const handleLayerAction = (action, obj) => {\n    if (!fabricCanvas || !obj) return;\n    \n    switch(action) {\n      case 'bringToFront':\n        obj.bringToFront();\n        break;\n      case 'sendToBack':\n        if (obj.data?.isBackground) {\n             obj.sendToBack(); // Background always back\n        } else {\n             obj.sendToBack();\n             // Ensure background stays at 0 if it exists\n             const bg = fabricCanvas.getObjects().find(o => o.data?.isBackground);\n             if (bg) bg.sendToBack();\n        }\n        break;\n      case 'bringForward':\n        obj.bringForward();\n        break;\n      case 'sendBackward':\n        obj.sendBackward();\n        // Ensure background stays at bottom\n        const bg = fabricCanvas.getObjects().find(o => o.data?.isBackground);\n        if (bg) bg.sendToBack();\n        break;\n      case 'delete':\n        if (obj.data?.isBackground) {\n            if (window.confirm(\"¬øEst√°s seguro de eliminar el fondo?\")) {\n                fabricCanvas.remove(obj);\n            }\n        } else {\n            // Check if object is ActiveSelection (multi-selection)\n            if (obj.type === 'activeSelection' && obj._objects) {\n                const objectsToDelete = [...obj._objects]; // Clone array\n                fabricCanvas.discardActiveObject();\n                objectsToDelete.forEach(o => fabricCanvas.remove(o));\n            } else {\n                fabricCanvas.remove(obj);\n            }\n        }\n        break;\n      case 'lock':\n        const isLocked = !obj.lockMovementX;\n        obj.set({\n            lockMovementX: isLocked,\n            lockMovementY: isLocked,\n            lockScalingX: isLocked,\n            lockScalingY: isLocked,\n            lockRotation: isLocked\n        });\n        toast(isLocked ? 'Capa bloqueada' : 'Capa desbloqueada', { icon: isLocked ? 'üîí' : 'üîì' });\n        break;\n    }\n    fabricCanvas.requestRenderAll();\n    updateLayers();\n  };\n\n  const updateObjectProperty = (prop, value) => {\n    if (!fabricCanvas || !selectedObject) return;\n    \n    if (prop === 'scale') {\n        let val = parseFloat(value);\n        if (selectedObject.data?.isQR && val < 0.5) {\n            val = 0.5;\n            toast('Escala m√≠nima del QR bloqueada para legibilidad', { icon: 'üõ°Ô∏è' });\n        }\n        selectedObject.scale(val);\n    } else if (prop === 'width') {\n        if (selectedObject.type === 'image') {\n            selectedObject.scaleToWidth(parseFloat(value));\n        } else {\n            selectedObject.set('width', parseFloat(value));\n        }\n    } else if (prop === 'height') {\n        if (selectedObject.type === 'image') {\n            selectedObject.scaleToHeight(parseFloat(value));\n        } else {\n            selectedObject.set('height', parseFloat(value));\n        }\n    } else {\n        selectedObject.set(prop, value);\n    }\n    \n    selectedObject.setCoords();\n    fabricCanvas.requestRenderAll();\n    updateLayers();\n  };\n\n  const loadDefaultDesign = (type = 'Certificado') => {\n      if (!fabricCanvas || !fabricCanvas.contextContainer) return;\n\n      try {\n        skipHistoryRef.current = true;\n        fabricCanvas.clear();\n        fabricCanvas.backgroundColor = '#fdfbf7'; // Cream/Parchment color\n        \n        // Ensure A4 Landscape dimensions\n        const width = 1123;\n        const height = 794;\n        fabricCanvas.setDimensions({ width, height });\n        setPageSize('Landscape');\n        \n        // Round to nearest integer for pixel-perfect rendering\n        const cx = Math.round(width / 2);\n        const cy = Math.round(height / 2);\n\n        // Helper for sharp rendering (odd strokes need 0.5 offset to land on pixels)\n        const sharp = (val, stroke) => stroke % 2 !== 0 ? val + 0.5 : val;\n\n        // 1. Ornamental Border (Elegant Double Border)\n        // Using center origin for perfect symmetry\n        const outerStroke = 5;\n        const outerBorder = new Rect({\n            left: sharp(cx, outerStroke), \n            top: sharp(cy, outerStroke),\n            width: width - 80, height: height - 80,\n            fill: 'transparent',\n            stroke: '#d4af37', // Gold\n            strokeWidth: outerStroke,\n            selectable: false,\n            evented: false,\n            rx: 10, ry: 10,\n            originX: 'center', originY: 'center',\n            data: { name: 'Borde Exterior' }\n        });\n        \n        const innerStroke = 2;\n        const innerBorder = new Rect({\n            left: sharp(cx, innerStroke), \n            top: sharp(cy, innerStroke),\n            width: width - 110, height: height - 110,\n            fill: 'transparent',\n            stroke: '#1a1a1a', // Black detail\n            strokeWidth: innerStroke,\n            selectable: false,\n            evented: false,\n            rx: 5, ry: 5,\n            originX: 'center', originY: 'center',\n            data: { name: 'Borde Interior' }\n        });\n\n        fabricCanvas.add(outerBorder, innerBorder);\n\n        // 2. Header / Institution (Top Section)\n        const institutionText = new IText('ACADEMIC CHAIN INSTITUTE', {\n            left: cx, top: 120,\n            fontSize: 32,\n            fontFamily: 'Times New Roman',\n            fill: '#2c3e50',\n            fontWeight: 'bold',\n            originX: 'center',\n            charSpacing: 100, \n            data: { name: 'Instituci√≥n', isInstitution: true }\n        });\n\n        // 3. Document Title\n        const titleText = new IText(type.toUpperCase(), {\n            left: cx, top: 220,\n            fontSize: 56,\n            fontFamily: 'Helvetica', \n            fill: '#1a1a1a',\n            fontWeight: 'bold',\n            originX: 'center',\n            shadow: new Shadow({ color: 'rgba(0,0,0,0.1)', blur: 4, offsetX: 2, offsetY: 2 }),\n            data: { name: 'T√≠tulo Principal', isTitle: true }\n        });\n\n        // 4. Presentation Line\n        const presentText = new IText('Se otorga el presente reconocimiento a:', {\n            left: cx, top: 320,\n            fontSize: 20,\n            fontFamily: 'Times New Roman',\n            fontStyle: 'italic',\n            fill: '#555',\n            originX: 'center',\n            data: { name: 'Texto Presentaci√≥n' }\n        });\n\n        // 5. Student Name \n        const studentName = new IText('{{STUDENT_NAME}}', {\n            left: cx, top: 380,\n            fontSize: 48,\n            fontFamily: 'Times New Roman',\n            fontStyle: 'italic',\n            fontWeight: 'bold',\n            fill: '#d4af37', \n            originX: 'center',\n            underline: false,\n            data: { isSmart: true, name: 'Nombre Alumno' }\n        });\n        \n        // Underline for name\n        const nameLineH = 2; // Even height\n        const nameLine = new Rect({\n             left: cx, top: sharp(440, nameLineH),\n             width: 500, height: nameLineH,\n             fill: '#d4af37',\n             originX: 'center', originY: 'center',\n             selectable: false,\n             data: { name: 'L√≠nea Nombre' }\n        });\n\n        // 6. Reason / Degree\n        const reasonText = new IText('Por haber completado satisfactoriamente el programa de:', {\n            left: cx, top: 480,\n            fontSize: 20,\n            fontFamily: 'Times New Roman',\n            fill: '#555',\n            originX: 'center',\n            data: { name: 'Texto Raz√≥n' }\n        });\n        \n        const degreeText = new IText('{{DEGREE}}', {\n            left: cx, top: 530,\n            fontSize: 32,\n            fontWeight: 'bold',\n            fontFamily: 'Helvetica',\n            fill: '#2c3e50',\n            originX: 'center',\n            data: { isSmart: true, name: 'Grado/Curso' }\n        });\n\n        // 7. Date\n        const dateText = new IText('Expedido el: {{DATE}}', {\n            left: cx, top: 600,\n            fontSize: 16,\n            fontFamily: 'Times New Roman',\n            fill: '#777',\n            originX: 'center',\n            data: { isSmart: true, name: 'Fecha' }\n        });\n\n        // 8. Signatures (Perfectly aligned)\n      const sigY = height - 120;\n      const sig1X = Math.round(width * 0.25);\n      const sig2X = Math.round(width * 0.75);\n      const sigLineH = 1; // Odd height\n\n      const sigLine1 = new Rect({\n          left: sig1X, top: sharp(sigY, sigLineH),\n          width: 260, height: sigLineH,\n          fill: '#333',\n          originX: 'center', originY: 'center',\n          data: { type: 'sig-line-1' }\n      });\n      const sigText1 = new IText('Firma del Director', {\n          left: sig1X, top: sigY + 15,\n          fontSize: 16, originX: 'center', fill: '#444', fontFamily: 'Times New Roman',\n          data: { type: 'sig-text-1' }\n      });\n\n      const sigLine2 = new Rect({\n          left: sig2X, top: sharp(sigY, sigLineH),\n          width: 260, height: sigLineH,\n          fill: '#333',\n          originX: 'center', originY: 'center',\n          data: { type: 'sig-line-2' }\n      });\n      const sigText2 = new IText('Firma del Instructor', {\n          left: sig2X, top: sigY + 15,\n          fontSize: 16, originX: 'center', fill: '#444', fontFamily: 'Times New Roman',\n          data: { type: 'sig-text-2' }\n      });\n\n      // 9. QR Code \n      const qrSize = 100;\n      const qrX = 100; \n      const qrY = height - 100;\n\n      const qrPlaceholder = new Rect({\n          left: qrX, top: qrY,\n          width: qrSize, height: qrSize,\n          fill: '#fff',\n          stroke: '#d4af37',\n          strokeWidth: 2,\n          originX: 'center',\n          originY: 'center',\n          rx: 5, ry: 5,\n          data: { isQR: true, name: 'Placeholder QR', type: 'qr-placeholder' }\n      });\n        const qrText = new IText('QR', {\n             left: qrX, top: qrY,\n             fontSize: 24, fill: '#ccc',\n             originX: 'center', originY: 'center',\n             selectable: false, evented: false,\n             fontFamily: 'Helvetica'\n        });\n        \n        fabricCanvas.add(\n            institutionText, titleText, presentText, \n            studentName, nameLine, reasonText, degreeText, dateText,\n            sigLine1, sigText1, sigLine2, sigText2,\n            qrPlaceholder, qrText\n        );\n\n        fabricCanvas.requestRenderAll();\n        updateLayers();\n\n        skipHistoryRef.current = false;\n        saveHistory();\n      } catch(e) {\n        console.error(\"Error loading default design\", e);\n        skipHistoryRef.current = false;\n      }\n  };\n\n  /* Canva Integration State */\n  const [canvaUrl, setCanvaUrl] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [showCanvaInput, setShowCanvaInput] = useState(false);\n\n  const handleCanvaImport = async () => {\n    if (!canvaUrl) {\n        toast.error('Por favor ingresa un enlace de Canva');\n        return;\n    }\n    setIsProcessing(true);\n    const result = await n8nService.processCanvaDesign(canvaUrl);\n    setIsProcessing(false);\n    \n    if (result.success && result.imageUrl) {\n        FabricImage.fromURL(result.imageUrl, { crossOrigin: 'anonymous' }).then(img => {\n            const scale = Math.max(fabricCanvas.width / img.width, fabricCanvas.height / img.height);\n            img.set({\n               originX: 'center', \n               originY: 'center',\n               scaleX: scale,\n               scaleY: scale,\n               top: fabricCanvas.height / 2,\n               left: fabricCanvas.width / 2,\n               data: { isBackground: true, name: 'Fondo Importado' },\n               selectable: false,\n               evented: false\n           });\n           const oldBg = fabricCanvas.getObjects().find(o => o.data?.isBackground);\n           if (oldBg) fabricCanvas.remove(oldBg);\n\n           fabricCanvas.add(img);\n           img.sendToBack();\n           fabricCanvas.requestRenderAll();\n           updateLayers();\n           toast.success('Dise√±o de Canva importado exitosamente');\n           setShowCanvaInput(false);\n           setCanvaUrl('');\n        });\n    } else if (result.mockUrl) {\n         FabricImage.fromURL(result.mockUrl, { crossOrigin: 'anonymous' }).then(img => {\n            const scale = Math.max(fabricCanvas.width / img.width, fabricCanvas.height / img.height);\n            img.set({\n                originX: 'center', \n                originY: 'center',\n                scaleX: scale,\n                scaleY: scale,\n                top: fabricCanvas.height / 2,\n                left: fabricCanvas.width / 2,\n                data: { isBackground: true, name: 'Fondo Demo' },\n                selectable: false,\n                evented: false\n            });\n            const oldBg = fabricCanvas.getObjects().find(o => o.data?.isBackground);\n            if (oldBg) fabricCanvas.remove(oldBg);\n\n            fabricCanvas.add(img);\n            img.sendToBack();\n            fabricCanvas.requestRenderAll();\n            updateLayers();\n            toast('Modo Demo: Dise√±o de ejemplo cargado', { icon: '‚ÑπÔ∏è' });\n            setShowCanvaInput(false);\n         });\n    } else {\n        toast.error(result.message || 'Error al importar');\n    }\n  };\n\n  useEffect(() => {\n      const saved = JSON.parse(localStorage.getItem('customTemplates') || '[]');\n      setCustomTemplates(saved);\n  }, []);\n\n  // Load Default if empty\n  useEffect(() => {\n      if (fabricCanvas && !data?.designStructure) {\n          if (fabricCanvas.getObjects().length === 0) {\n              loadDefaultDesign('Certificado');\n              toast('Plantilla predeterminada cargada', { icon: '‚ÑπÔ∏è' });\n          }\n      }\n  }, [fabricCanvas]);\n\n  useEffect(() => {\n    if (fabricCanvas) {\n      const update = () => {\n        const objects = fabricCanvas.getObjects();\n        setLayers([...objects].reverse());\n      };\n\n      const handleModification = () => {\n          update();\n          saveHistory();\n      };\n\n      fabricCanvas.on('object:added', handleModification);\n      fabricCanvas.on('object:removed', handleModification);\n      fabricCanvas.on('object:modified', handleModification);\n      fabricCanvas.on('selection:updated', update);\n      \n      const realtimeUpdate = () => setForceUpdate(prev => prev + 1);\n      fabricCanvas.on('object:moving', realtimeUpdate);\n      fabricCanvas.on('object:scaling', realtimeUpdate);\n      fabricCanvas.on('object:rotating', realtimeUpdate);\n      fabricCanvas.on('object:skewing', realtimeUpdate);\n\n      // Initial save removed to prevent empty state in history\n      update();\n\n      return () => {\n        fabricCanvas.off('object:added', handleModification);\n        fabricCanvas.off('object:removed', handleModification);\n        fabricCanvas.off('object:modified', handleModification);\n        fabricCanvas.off('selection:updated', update);\n        \n        fabricCanvas.off('object:moving', realtimeUpdate);\n        fabricCanvas.off('object:scaling', realtimeUpdate);\n        fabricCanvas.off('object:rotating', realtimeUpdate);\n        fabricCanvas.off('object:skewing', realtimeUpdate);\n      };\n    }\n  }, [fabricCanvas]);\n\n  /* Preview Mode State */\n  const [isPreviewMode, setIsPreviewMode] = useState(false);\n\n  const togglePreviewMode = () => {\n    if (!fabricCanvas) return;\n\n    const newMode = !isPreviewMode;\n    setIsPreviewMode(newMode);\n\n    if (newMode) {\n      // Enter Preview\n      fabricCanvas.discardActiveObject();\n      fabricCanvas.requestRenderAll();\n      \n      const objects = fabricCanvas.getObjects();\n      objects.forEach(obj => {\n        obj.selectable = false;\n        obj.evented = false;\n\n        if (obj.type === 'i-text' || obj.type === 'text') {\n           if (obj.text.includes('{{nombre_alumno}}')) {\n               obj.data = { ...obj.data, originalText: obj.text };\n               obj.text = 'JUAN P√âREZ';\n           } else if (obj.text.includes('{{nombre_institucion}}')) {\n               obj.data = { ...obj.data, originalText: obj.text };\n               obj.text = 'UNIVERSIDAD ACADEMIC CHAIN';\n           } else if (obj.text.includes('{{fecha}}')) {\n               obj.data = { ...obj.data, originalText: obj.text };\n               obj.text = new Date().toLocaleDateString();\n           } else if (obj.data?.isSmart) {\n                obj.data = { ...obj.data, originalText: obj.text };\n                obj.text = obj.text.replace(/{{|}}/g, '').toUpperCase();\n           }\n        }\n      });\n    } else {\n      // Exit Preview\n      const objects = fabricCanvas.getObjects();\n      objects.forEach(obj => {\n        // Unlock if not explicitly locked by user (simplified: unlock all except background)\n        if (!obj.data?.isBackground) {\n            obj.selectable = true;\n            obj.evented = true;\n        }\n\n        if (obj.data?.originalText) {\n            obj.text = obj.data.originalText;\n            delete obj.data.originalText;\n        }\n      });\n    }\n    fabricCanvas.requestRenderAll();\n  };\n\n  /* Snap & Alignment Logic */\n  useEffect(() => {\n      if (!fabricCanvas) return;\n\n      fabricCanvas.selectionColor = 'rgba(125, 42, 232, 0.1)';\n      fabricCanvas.selectionBorderColor = '#7D2AE8';\n      fabricCanvas.selectionLineWidth = 1;\n\n      const customizeObject = (obj) => {\n          obj.set({\n              transparentCorners: false,\n              cornerColor: '#ffffff',\n              cornerStrokeColor: '#7D2AE8',\n              borderColor: '#00C4CC',\n              cornerSize: 10,\n              padding: 5,\n              cornerStyle: 'circle',\n              borderDashArray: [4, 4]\n          });\n      };\n\n      fabricCanvas.getObjects().forEach(customizeObject);\n      const handleAdded = (e) => customizeObject(e.target);\n      fabricCanvas.on('object:added', handleAdded);\n\n      const snapThreshold = 10;\n      let verticalGuide = null;\n      let horizontalGuide = null;\n      \n      const handleObjectMoving = (e) => {\n          if (isPreviewMode) return; \n\n          const obj = e.target;\n          const canvasWidth = fabricCanvas.width;\n          const canvasHeight = fabricCanvas.height;\n          let snappedX = false;\n          let snappedY = false;\n\n          // Snap to Center X\n          if (Math.abs(obj.left + (obj.width * obj.scaleX) / 2 - canvasWidth / 2) < snapThreshold) {\n              obj.set({ left: canvasWidth / 2 - (obj.width * obj.scaleX) / 2 });\n              snappedX = true;\n          }\n\n          // Snap to Center Y\n          if (Math.abs(obj.top + (obj.height * obj.scaleY) / 2 - canvasHeight / 2) < snapThreshold) {\n              obj.set({ top: canvasHeight / 2 - (obj.height * obj.scaleY) / 2 });\n              snappedY = true;\n          }\n\n          if (snappedX) {\n              if (!verticalGuide) {\n                  verticalGuide = new Rect({\n                      left: canvasWidth / 2, top: 0, width: 1, height: canvasHeight,\n                      fill: '#ff00ff', selectable: false, evented: false, opacity: 0.8\n                  });\n                  fabricCanvas.add(verticalGuide);\n              }\n          } else {\n              if (verticalGuide) { fabricCanvas.remove(verticalGuide); verticalGuide = null; }\n          }\n\n          if (snappedY) {\n              if (!horizontalGuide) {\n                  horizontalGuide = new Rect({\n                      left: 0, top: canvasHeight / 2, width: canvasWidth, height: 1,\n                      fill: '#ff00ff', selectable: false, evented: false, opacity: 0.8\n                  });\n                  fabricCanvas.add(horizontalGuide);\n              }\n          } else {\n              if (horizontalGuide) { fabricCanvas.remove(horizontalGuide); horizontalGuide = null; }\n          }\n\n          if (obj.data?.isSmart) {\n            setActiveTooltip({\n                x: obj.left + (obj.width * obj.scaleX) / 2,\n                y: obj.top - 40,\n                text: obj.text\n            });\n          }\n      };\n\n      const clearGuides = () => {\n          if (verticalGuide) { fabricCanvas.remove(verticalGuide); verticalGuide = null; }\n          if (horizontalGuide) { fabricCanvas.remove(horizontalGuide); horizontalGuide = null; }\n      };\n\n      fabricCanvas.on('object:moving', handleObjectMoving);\n      fabricCanvas.on('mouse:up', clearGuides);\n\n      return () => {\n          fabricCanvas.off('object:moving', handleObjectMoving);\n          fabricCanvas.off('mouse:up', clearGuides);\n      };\n  }, [fabricCanvas, isPreviewMode]);\n\n  // Canvas scale for \"Zoom to Fit\"\n  const [scaleFactor, setScaleFactor] = useState(1);\n\n  // Auto-fit calculation\n  useEffect(() => {\n    if (!containerRef.current || !fabricCanvas) return;\n\n    const resizeObserver = new ResizeObserver(() => {\n        const containerWidth = containerRef.current.clientWidth - 80; // Padding\n        const containerHeight = containerRef.current.clientHeight - 80;\n        \n        // Dynamic target based on orientation\n        const targetWidth = pageSize === 'Portrait' ? 794 : 1123;\n        const targetHeight = pageSize === 'Portrait' ? 1123 : 794;\n\n        const scaleX = containerWidth / targetWidth;\n        const scaleY = containerHeight / targetHeight;\n        \n        // Use the smaller scale to fit entirely\n        let newScale = Math.min(scaleX, scaleY);\n        // Cap max scale to avoid pixelation but allow full view\n        if (newScale > 1.2) newScale = 1.2; \n        \n        setScaleFactor(newScale);\n    });\n\n    resizeObserver.observe(containerRef.current);\n    return () => resizeObserver.disconnect();\n  }, [fabricCanvas, pageSize]);\n\n  useEffect(() => {\n    if (containerRef.current && canvasRef.current) {\n      // Initialize with a temporary size, will be resized by loadDefaultDesign or changePageSize\n      const canvas = new Canvas(canvasRef.current, {\n        width: 800, \n        height: 600,\n        backgroundColor: '#ffffff',\n        selection: true\n      });\n\n      canvas.on('selection:created', (e) => setSelectedObject(e.selected[0]));\n      canvas.on('selection:updated', (e) => setSelectedObject(e.selected[0]));\n      canvas.on('selection:cleared', () => setSelectedObject(null));\n\n      canvas.on('object:moving', (e) => {\n        const obj = e.target;\n        if (obj && obj.data && obj.data.isSmart) {\n          setActiveTooltip({\n            x: obj.left + (obj.width * obj.scaleX) / 2,\n            y: obj.top - 40,\n            text: obj.text\n          });\n        }\n      });\n\n      canvas.on('mouse:up', () => setActiveTooltip(null));\n      setFabricCanvas(canvas);\n\n      return () => {\n        canvas.dispose();\n      };\n    }\n  }, []);\n\n  useEffect(() => {\n    if (selectedObject) {\n      if (selectedObject.type === 'i-text') {\n        if (color) selectedObject.set('fill', color);\n        if (fontSize) selectedObject.set('fontSize', parseInt(fontSize));\n      } else if (selectedObject.type === 'rect') {\n        if (color) selectedObject.set('fill', color);\n      }\n      fabricCanvas.requestRenderAll();\n    }\n  }, [color, fontSize]);\n\n\n  const addText = (initialText = text) => {\n    if (!fabricCanvas) return;\n    const textObj = new IText(initialText, {\n      left: fabricCanvas.width / 2 - 100,\n      top: fabricCanvas.height / 2,\n      fill: color,\n      fontSize: fontSize,\n      fontFamily: 'Outfit',\n      originX: 'left',\n      originY: 'top'\n    });\n    fabricCanvas.add(textObj);\n    fabricCanvas.setActiveObject(textObj);\n  };\n\n  const addRect = () => {\n    if (!fabricCanvas) return;\n    const rect = new Rect({ left: 100, top: 100, fill: color, width: 100, height: 100 });\n    fabricCanvas.add(rect);\n  };\n\n  const handleImageUpload = (e) => {\n    const f = e.target.files[0];\n    if (f) {\n      const reader = new FileReader();\n      reader.onload = (f) => {\n        FabricImage.fromURL(f.target.result).then(img => {\n          img.scaleToWidth(200);\n          fabricCanvas.add(img);\n          fabricCanvas.setActiveObject(img);\n        });\n      };\n      reader.readAsDataURL(f);\n    }\n  };\n\n  const handleSignatureUpload = (e) => {\n    const f = e.target.files[0];\n    if (f) {\n      const reader = new FileReader();\n      reader.onload = (f) => {\n        const newSig = {\n            id: `sig-${Date.now()}`,\n            url: f.target.result,\n            name: `Firma ${signatures.length + 1}`\n        };\n        setSignatures([...signatures, newSig]);\n        toast.success('Firma a√±adida a la biblioteca');\n      };\n      reader.readAsDataURL(f);\n    }\n  };\n\n  const addSignatureToCanvas = (sig) => {\n      if (!fabricCanvas) return;\n      FabricImage.fromURL(sig.url).then(img => {\n          img.scaleToWidth(150);\n          img.set({\n              left: fabricCanvas.width / 2,\n              top: fabricCanvas.height - 200,\n              originX: 'center',\n              originY: 'center',\n              data: { name: `Firma: ${sig.name}` }\n          });\n          fabricCanvas.add(img);\n          fabricCanvas.setActiveObject(img);\n          toast.success('Firma estampada');\n      });\n  };\n\n  const autoStampSignatures = () => {\n      if (!fabricCanvas || signatures.length === 0) {\n          toast.error('No hay firmas disponibles para estampar');\n          return;\n      }\n      \n      const bottomY = fabricCanvas.height - 150;\n      const spacing = fabricCanvas.width / (signatures.length + 1);\n\n      signatures.forEach((sig, index) => {\n          FabricImage.fromURL(sig.url).then(img => {\n              img.scaleToWidth(120);\n              img.set({\n                  left: spacing * (index + 1),\n                  top: bottomY,\n                  originX: 'center',\n                  originY: 'center',\n                  data: { name: `Firma: ${sig.name}` }\n              });\n              fabricCanvas.add(img);\n          });\n      });\n      fabricCanvas.requestRenderAll();\n      toast.success('Estampado autom√°tico completado');\n  };\n\n  const handleBackgroundUpload = (e) => {\n    const f = e.target.files[0];\n    if (f && fabricCanvas) {\n      const reader = new FileReader();\n      reader.onload = (f) => {\n        FabricImage.fromURL(f.target.result).then(img => {\n           const scaleX = fabricCanvas.width / img.width;\n           const scaleY = fabricCanvas.height / img.height;\n           const scale = Math.max(scaleX, scaleY);\n           \n           img.set({\n               originX: 'center', \n               originY: 'center',\n               scaleX: scale,\n               scaleY: scale,\n               top: fabricCanvas.height / 2,\n               left: fabricCanvas.width / 2,\n               selectable: false,\n               evented: false,\n               data: { isBackground: true, name: 'Fondo' }\n           });\n           \n           const oldBg = fabricCanvas.getObjects().find(o => o.data?.isBackground);\n           if (oldBg) fabricCanvas.remove(oldBg);\n\n           fabricCanvas.add(img);\n           img.sendToBack();\n           fabricCanvas.requestRenderAll();\n           updateLayers();\n           toast.success('Fondo actualizado');\n        });\n      };\n      reader.readAsDataURL(f);\n    }\n  };\n\n  /* funciones no usadas eliminadas para limpiar advertencias */\n\n\n  const saveAsTemplate = async () => {\n      if (isPreviewMode) {\n          togglePreviewMode();\n          toast('Vista Previa desactivada para guardar', { icon: '‚ÑπÔ∏è' });\n      }\n\n      const name = prompt(\"Nombre para tu plantilla:\");\n      if (!name) return false;\n      \n      const json = fabricCanvas.toJSON(['data', 'id', 'selectable', 'evented', 'lockMovementX', 'lockMovementY', 'lockScalingX', 'lockScalingY', 'shadow', 'stroke', 'strokeWidth', 'opacity']);\n      \n      // Extract AI Metadata for easier indexing in n8n\n      const aiMetadata = {\n          competencies: [],\n          projects: [],\n          smartFields: []\n      };\n\n      json.objects.forEach(obj => {\n          if (obj.data?.dataType === 'competence') {\n              aiMetadata.competencies.push(obj.text);\n          } else if (obj.data?.dataType === 'project') {\n              aiMetadata.projects.push(obj.text);\n          } else if (obj.data?.isSmart) {\n              aiMetadata.smartFields.push(obj.text);\n          }\n      });\n\n      const newTemplate = {\n          id: `custom-${Date.now()}`,\n          name: name,\n          thumbnail: 'bg-slate-800 border-dashed border-cyan-500', \n          category: 'Personal',\n          bg: fabricCanvas.backgroundColor,\n          objects: json.objects,\n          tags: ['personal', ...aiMetadata.competencies], // Auto-tag with competencies\n          aiMetadata: aiMetadata, // Save metadata for \"Perfect Match\"\n          pageSize: pageSize,\n          docType: docType\n      };\n      \n      const updated = [...customTemplates, newTemplate];\n      setCustomTemplates(updated);\n      localStorage.setItem('customTemplates', JSON.stringify(updated));\n      \n      try {\n          await n8nService.saveTemplate({\n              ...newTemplate,\n              canvasJson: json \n          });\n          toast.success('Plantilla guardada en Studio Cloud');\n      } catch (e) {\n          console.warn('Cloud save failed', e);\n          toast.success('Plantilla guardada localmente');\n      }\n\n      setActiveCategory('Personal');\n      return newTemplate.id;\n  };\n\n  const deleteSelected = () => {\n    if (fabricCanvas && selectedObject) {\n      if (selectedObject.type === 'activeSelection' && selectedObject._objects) {\n          const objectsToDelete = [...selectedObject._objects];\n          fabricCanvas.discardActiveObject();\n          objectsToDelete.forEach(o => fabricCanvas.remove(o));\n          setSelectedObject(null);\n      } else {\n          fabricCanvas.remove(selectedObject);\n          setSelectedObject(null);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Delete' || e.key === 'Backspace') {\n        if (fabricCanvas && fabricCanvas.getActiveObject()) {\n           const active = fabricCanvas.getActiveObject();\n           if (active.isEditing) return;\n           deleteSelected();\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [fabricCanvas, selectedObject]);\n\n  const changePageSize = (size) => {\n      if (!fabricCanvas) return;\n      \n      const oldWidth = fabricCanvas.width;\n      const oldHeight = fabricCanvas.height;\n\n      // Prevent redundant updates\n      if ((size === 'Landscape' && oldWidth > oldHeight) || \n          (size === 'Portrait' && oldWidth < oldHeight)) {\n           // Double check exact dimensions\n           if (size === 'Landscape' && oldWidth === 1123) return;\n           if (size === 'Portrait' && oldWidth === 794) return;\n      }\n\n      setPageSize(size);\n      \n      let width = 1123;\n      let height = 794;\n\n      if (size === 'Landscape') {\n          width = 1123;\n          height = 794;\n      } else if (size === 'Portrait') {\n          width = 794;\n          height = 1123;\n      } else if (size === 'Square') {\n          width = 800;\n          height = 800;\n      }\n\n      fabricCanvas.setDimensions({ width, height });\n      \n      const cx = width / 2;\n      const cy = height / 2;\n      \n      const oldCx = oldWidth / 2;\n      \n      // Sidebar Detection\n      const sidebarObj = fabricCanvas.getObjects().find(o => o.data?.type === 'sidebar-left');\n      const sidebarWidth = sidebarObj ? (sidebarObj.width * sidebarObj.scaleX) : 0;\n      \n      // Printable Center (center of the area to the right of sidebar)\n      const printableCx = sidebarObj ? (sidebarWidth + (width - sidebarWidth) / 2) : cx;\n      const oldPrintableCx = sidebarObj ? (sidebarWidth + (oldWidth - sidebarWidth) / 2) : oldCx;\n\n      const scaleX = width / oldWidth;\n      const scaleY = height / oldHeight;\n\n      // Smart Recenter & Resize Logic\n      fabricCanvas.getObjects().forEach(obj => {\n          let type = obj.data?.type || '';\n\n          // Heuristics for legacy objects\n          if (!type) {\n            if (obj.data?.isQR) type = 'qr-placeholder';\n            else if (obj.text === 'Firma del Director' || obj.text === 'Firma del Instructor') type = 'sig-text';\n            else if (obj.type === 'rect' && obj.width === 260 && obj.height === 1 && obj.fill === '#333') type = 'sig-line';\n          }\n\n          // 1. Backgrounds & Full Size Overlays\n          if (['background-shape', 'background-main'].includes(type)) {\n              obj.set({ width: width, height: height, left: cx, top: cy, scaleX: 1, scaleY: 1 });\n          }\n          else if (['grid-border', 'glow-border', 'background-panel', 'border-outer', 'border-mid', 'border-inner'].includes(type)) {\n              // Maintain margins\n              const marginX = oldWidth - (obj.width * obj.scaleX);\n              const marginY = oldHeight - (obj.height * obj.scaleY);\n              \n              const newW = width - marginX;\n              const newH = height - marginY;\n              \n              obj.set({ \n                  width: newW, \n                  height: newH, \n                  left: cx, \n                  top: cy,\n                  scaleX: 1,\n                  scaleY: 1\n              });\n          }\n          \n          // 2. Sidebars\n          else if (type === 'sidebar-left') {\n              obj.set({ height: height, top: cy, left: (obj.width * obj.scaleX) / 2 }); \n          }\n          \n          // 3. Header Bars / Top Bars\n          else if (['header-bar', 'top-bar', 'header-bg', 'hud-bg'].includes(type)) {\n               // If it's a full width header or specific bar\n               if (type === 'header-bar') {\n                   const margin = oldWidth - (obj.width * obj.scaleX);\n                   const isCenteredOnPage = Math.abs(obj.left - oldCx) < 10;\n                   const isCenteredOnPrintable = Math.abs(obj.left - oldPrintableCx) < 10;\n\n                   obj.set({ width: width - margin });\n                   \n                   if (isCenteredOnPage) {\n                       obj.set({ left: cx });\n                   } else if (isCenteredOnPrintable) {\n                       obj.set({ left: printableCx });\n                   } else {\n                       obj.set({ left: sidebarObj ? printableCx : cx });\n                   }\n               } else {\n                   obj.set({ left: printableCx });\n               }\n          }\n          else if (['logo-sidebar', 'logo-bg', 'logo-text'].includes(type)) {\n               if (sidebarObj) {\n                   obj.set({ left: sidebarWidth / 2 });\n               } else {\n                   obj.set({ left: 50 });\n               }\n          }\n          \n          // 4. Background Lines\n          else if (['bg-line-h'].includes(type)) {\n               obj.set({ x2: width, top: cy });\n          }\n          else if (['bg-line-v'].includes(type)) {\n               obj.set({ y2: height, left: cx });\n          }\n\n          // 5. Corners (Smart Anchors)\n          else if (type.startsWith('corner-')) {\n               const isLeft = type.includes('-l') || obj.left < oldWidth / 2;\n               const isTop = type.includes('-t') || obj.top < oldHeight / 2;\n               \n               const marginX = isLeft ? obj.left : (oldWidth - obj.left);\n               const marginY = isTop ? obj.top : (oldHeight - obj.top);\n               \n               obj.set({ \n                   left: isLeft ? marginX : (width - marginX),\n                   top: isTop ? marginY : (height - marginY)\n               });\n          }\n\n          // 6. QR / Signatures / Footer (Bottom Anchored)\n          else if (type.includes('qr-') || type.includes('sig-') || type.includes('text-footer') || obj.top > oldHeight * 0.75) {\n               if (obj.top > oldHeight * 0.6) { \n                   const bottomMargin = oldHeight - obj.top;\n                   const newTop = height - bottomMargin;\n                   \n                   if (type.includes('qr-')) {\n                       if (size === 'Portrait') {\n                           // Ensure QR is well below signatures but above footer\n                           obj.set({ left: printableCx, top: height - 140 });\n                           // Scale down slightly to fit better\n                           obj.scale(0.8); \n                       } else {\n                           obj.set({ left: width - 120, top: height - 120 });\n                           obj.scale(1); // Restore size\n                       }\n                   } else if (type.includes('sig-')) {\n                       // Reset width for lines to ensure consistency\n                       if (type.includes('line')) {\n                           obj.set({ width: 220, scaleX: 1 });\n                       }\n\n                       const isLine = type.includes('line');\n                       const offset = isLine ? 0 : 20;\n\n                       // Check for explicit Left/Right signatures (-1, -2)\n                       if (type.includes('-1')) {\n                           // Left Signature\n                           if (size === 'Portrait') {\n                               // Side-by-Side Tighter (Vertical Mode)\n                               obj.set({ left: printableCx - 180, top: height - 250 + offset });\n                           } else {\n                               // Side-by-Side Wider (Horizontal Mode)\n                               obj.set({ left: printableCx - 220, top: height - 150 + offset });\n                           }\n                       } else if (type.includes('-2')) {\n                           // Right Signature\n                           if (size === 'Portrait') {\n                               // Side-by-Side Tighter (Vertical Mode)\n                               obj.set({ left: printableCx + 180, top: height - 250 + offset });\n                           } else {\n                               // Side-by-Side Wider (Horizontal Mode)\n                               obj.set({ left: printableCx + 220, top: height - 150 + offset });\n                           }\n                       } else {\n                           // Single / Center Signature (e.g., Minimal Template)\n                           if (size === 'Portrait') {\n                               obj.set({ left: printableCx, top: height - 320 + offset });\n                           } else {\n                               obj.set({ left: printableCx, top: height - 150 + offset });\n                           }\n                       }\n                   } else {\n                        // Footer Text\n                        if (size === 'Portrait') {\n                            if (type.includes('text-footer')) {\n                                if (type === 'text-footer-1') {\n                                    obj.set({ top: height - 80, left: printableCx });\n                                } else if (type === 'text-footer-2') {\n                                    obj.set({ top: height - 50, left: printableCx });\n                                } else {\n                                    obj.set({ top: height - 50, left: printableCx });\n                                }\n                            } else {\n                                // For other bottom elements (like seal), maintain margin\n                                obj.set({ top: newTop, left: printableCx });\n                            }\n                        } else {\n                            obj.set({ top: newTop, left: printableCx });\n                        }\n                    }\n               }\n          }\n\n          // 7. General Content\n          else {\n              const offset = obj.left - oldPrintableCx;\n              \n              // Apply proportional vertical scaling to maintain relative layout\n              const newTop = obj.top * scaleY;\n              \n              obj.set({ \n                  left: printableCx + offset,\n                  top: newTop\n              });\n              \n              // Maintain original text scale to prevent cumulative resizing issues\n              // logic removed: if (size === 'Portrait' ...) obj.scale(...)\n          }\n\n          // Fallbacks\n          if (obj.data?.name === 'Borde Exterior') {\n              obj.set({ width: width - 80, height: height - 80, top: cy, left: cx });\n          }\n          if (obj.data?.name === 'Borde Interior') {\n               obj.set({ width: width - 110, height: height - 110, top: cy, left: cx });\n          }\n          \n          obj.setCoords();\n      });\n\n      fabricCanvas.requestRenderAll();\n      toast.success(`Tama√±o ajustado a ${size}`);\n      saveHistory();\n  };\n\n  const updateDocType = (type) => {\n      setDocType(type);\n      if (!fabricCanvas || !fabricCanvas.contextContainer) return;\n      \n      const objects = fabricCanvas.getObjects();\n      \n      // 1. Find Title Object (Smart Search)\n      // Look for explicit type 'title-main' or 'isTitle' flag\n      let titleObj = objects.find(o => o.data?.type === 'title-main' || o.data?.isTitle);\n      \n      // Fallback: Try to find by content heuristic if explicit type is missing\n      if (!titleObj) {\n          titleObj = objects.find(o => \n             (o.type === 'i-text' || o.type === 'text') && \n             (o.text?.includes('CERTIFICADO') || o.text?.includes('DIPLOMA') || o.text?.includes('CREDENCIAL') || o.text?.includes('CONSTANCIA'))\n          );\n      }\n\n      if (titleObj) {\n          const current = titleObj.text;\n          const upperType = type.toUpperCase();\n          \n          let newText = upperType;\n          \n          // Smart Context Preservation (Mantener el formato y sufijos)\n          if (current.includes('FINALIZACI√ìN')) newText += ' DE FINALIZACI√ìN';\n          else if (current.includes('HONOR')) newText += ' DE HONOR';\n          else if (current.includes('ACTIVO DIGITAL')) newText += ' DE ACTIVO DIGITAL';\n          else if (current.includes('EXCELENCIA')) newText += ' DE EXCELENCIA';\n          else if (current.includes('PARTICIPACI√ìN')) newText += ' DE PARTICIPACI√ìN';\n          else if (current.includes('M√âRITO')) newText += ' AL M√âRITO';\n          \n          // Gender handling for \"Verificada/o\"\n          else if (current.includes('VERIFICADA') || current.includes('VERIFICADO')) {\n              const isFem = ['CONSTANCIA', 'CREDENCIAL'].includes(upperType);\n              newText += isFem ? ' VERIFICADA' : ' VERIFICADO';\n          }\n          \n          // Apply change\n          titleObj.set('text', newText);\n          \n          // Ensure metadata is set for future reference\n          if (!titleObj.data) titleObj.data = {};\n          titleObj.data.isTitle = true;\n          titleObj.data.type = 'title-main'; \n          \n          fabricCanvas.requestRenderAll();\n          toast.success(`T√≠tulo actualizado a: ${newText}`);\n          saveHistory();\n      } else {\n          // If absolutely no title found, add one (fallback)\n          const text = new IText(type.toUpperCase(), {\n              left: fabricCanvas.width / 2,\n              top: 100,\n              fontSize: 40,\n              fontFamily: 'Orbitron',\n              fill: '#000000',\n              originX: 'center',\n              originY: 'center',\n              fontWeight: 'bold',\n              data: { type: 'title-main', isTitle: true }\n          });\n          fabricCanvas.add(text);\n          fabricCanvas.requestRenderAll();\n          toast.success(`T√≠tulo creado: ${type.toUpperCase()}`);\n          saveHistory();\n      }\n  };\n\n  const addSmartField = (field) => {\n    if (!fabricCanvas) return;\n    const text = new IText(field, {\n      left: fabricCanvas.width / 2,\n      top: fabricCanvas.height / 2,\n      fontSize: 20, \n      fontFamily: 'JetBrains Mono',\n      fill: '#2563eb', \n      originX: 'center',\n      originY: 'center',\n      fontWeight: 'bold',\n      data: { isSmart: true },\n      editable: false,\n      shadow: new Shadow({ color: '#2563eb', blur: 2 })\n    });\n    fabricCanvas.add(text);\n    fabricCanvas.setActiveObject(text);\n    fabricCanvas.requestRenderAll();\n    toast.success(`Variable ${field} agregada`);\n  };\n\n  const handlePdfUpload = async (e) => {\n      toast.error('La importaci√≥n de PDF est√° temporalmente deshabilitada para mantenimiento.');\n  };\n\n  const loadTemplate = (templateId) => {\n    if (!fabricCanvas) return;\n    const allTemplates = [...templates, ...customTemplates];\n    const tmpl = allTemplates.find(t => t.id === templateId);\n    if (!tmpl) return;\n\n    if (!window.confirm(`¬øCargar plantilla \"${tmpl.name}\"? Se reemplazar√° el dise√±o actual.`)) return;\n\n    skipHistoryRef.current = true;\n    try {\n        if (tmpl.pageSize) changePageSize(tmpl.pageSize);\n        if (tmpl.docType) setDocType(tmpl.docType);\n\n        fabricCanvas.clear();\n        fabricCanvas.backgroundColor = tmpl.bg;\n        fabricCanvas.requestRenderAll();\n\n        tmpl.objects.forEach(obj => {\n        const { type, text, ...options } = obj;\n        let textContent = text;\n\n        if (type === 'rect') {\n            fabricCanvas.add(new Rect(options));\n        } else if (type === 'i-text' || type === 'text') {\n            const textOptions = { ...options };\n            \n            if (textContent && textContent.includes('{{')) {\n            textOptions.data = { isSmart: true };\n            textOptions.editable = false;\n            if (tmpl.category === 'Holographic') {\n                textOptions.shadow = new Shadow({ color: textOptions.fill, blur: 10 });\n            }\n            }\n            fabricCanvas.add(new IText(textContent || 'Texto', textOptions));\n        }\n        });\n\n        toast.success(`Plantilla cargada: ${tmpl.name}`);\n        skipHistoryRef.current = false;\n        saveHistory();\n    } catch(e) {\n        console.error(\"Error loading template\", e);\n        skipHistoryRef.current = false;\n    }\n  };\n\n  const handleExport = () => {\n    if (!fabricCanvas) return;\n    const dataUrl = fabricCanvas.toDataURL({ format: 'png', quality: 0.8 });\n\n    fetch(dataUrl)\n      .then(res => res.blob())\n      .then(blob => {\n        const file = new File([blob], \"certificate-design.png\", { type: \"image/png\" });\n        const jsonStructure = fabricCanvas.toJSON(['data']);\n        onSave(file, jsonStructure);\n        onClose();\n      });\n  };\n\n  const allTemplates = [...templates, ...customTemplates];\n  const filteredTemplates = allTemplates.filter(t => {\n    const matchesSearch = t.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (t.tags && t.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())));\n    const matchesCategory = activeCategory === 'All' || t.category === activeCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  const categories = ['All', 'Personal', 'Modern', 'Sovereign', 'Holographic', 'Classic', 'Signatures'];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 bg-black/95 backdrop-blur-md flex items-center justify-center\"\n    >\n      <motion.div\n        initial={{ scale: 0.95, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.95, opacity: 0 }}\n        transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n        className=\"bg-slate-900 w-full h-full flex flex-col lg:flex-row overflow-y-auto lg:overflow-hidden shadow-2xl\"\n      >\n\n        {/* Left Sidebar - Controls */}\n        <div className=\"w-full lg:w-80 h-auto lg:h-full bg-slate-950/90 border-r border-slate-800 p-6 flex flex-col gap-6 overflow-y-auto backdrop-blur-md flex-shrink-0 order-2 lg:order-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">üé®</span>\n            <h2 className=\"text-xl font-display font-bold text-white\">Studio <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400\">Hologr√°fico</span></h2>\n          </div>\n          \n          <div className=\"flex gap-2\">\n            <button\n                onClick={togglePreviewMode}\n                className={`flex-1 py-4 px-4 rounded-xl font-bold text-base flex items-center justify-center gap-2 transition-all border ${isPreviewMode ? 'bg-green-500/20 border-green-500 text-green-300 shadow-[0_0_15px_rgba(34,197,94,0.3)]' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}\n            >\n                {isPreviewMode ? <EyeOff size={20} /> : <Eye size={20} />}\n                {isPreviewMode ? 'Editar' : 'Vista Previa'}\n            </button>\n            {isPreviewMode && (\n                <button\n                    onClick={handleExport}\n                    className=\"flex-1 py-4 px-4 rounded-xl font-bold text-base flex items-center justify-center gap-2 transition-all bg-blue-600 text-white hover:bg-blue-500 shadow-lg\"\n                >\n                    <Upload size={20} /> Exportar\n                </button>\n            )}\n          </div>\n\n          {!isPreviewMode && (\n          <>\n          <div className=\"bg-slate-900 p-4 rounded-lg border border-slate-800 space-y-4\">\n             <div>\n                <label className=\"text-xs font-bold text-slate-400 uppercase mb-2 block\">Configuraci√≥n de P√°gina</label>\n                <div className=\"flex gap-2\">\n                    <button \n                        onClick={() => changePageSize('Landscape')}\n                        className={`flex-1 py-2 rounded text-xs font-medium border ${pageSize === 'Landscape' ? 'bg-blue-900/30 border-blue-500 text-blue-300' : 'bg-slate-800 border-slate-700 text-slate-400'}`}\n                    >\n                        Horizontal\n                    </button>\n                    <button \n                        onClick={() => changePageSize('Portrait')}\n                        className={`flex-1 py-2 rounded text-xs font-medium border ${pageSize === 'Portrait' ? 'bg-blue-900/30 border-blue-500 text-blue-300' : 'bg-slate-800 border-slate-700 text-slate-400'}`}\n                    >\n                        Vertical\n                    </button>\n                </div>\n             </div>\n\n             <div>\n                <label className=\"text-xs font-bold text-slate-400 uppercase mb-2 block\">Tipo de Documento</label>\n                <div className=\"flex flex-wrap gap-2\">\n                   {['Diploma', 'Certificado', 'Constancia', 'Reconocimiento'].map(type => (\n                    <button\n                        key={type}\n                        onClick={() => updateDocType(type)}\n                        className={`px-3 py-2 rounded text-xs font-medium transition-colors border ${docType === type ? 'bg-purple-600 border-purple-500 text-white' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}\n                    >\n                        {type}\n                    </button>\n                ))}\n             </div>\n          </div>\n          </div>\n          \n          <div className=\"flex gap-2 mb-4\">\n            <label className=\"flex-1 py-4 bg-slate-900/80 hover:bg-slate-800 text-slate-300 font-bold text-base rounded-xl text-center transition-all cursor-pointer border border-slate-700 hover:border-purple-500/50 flex items-center justify-center gap-2 group shadow-sm hover:shadow-purple-500/10\">\n                <FileUp size={20} className=\"text-purple-400 group-hover:text-purple-300 transition-colors\" /> \n                <span className=\"group-hover:text-white transition-colors\">Subir Fondo</span>\n                <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleBackgroundUpload} />\n            </label>\n            <label className=\"flex-1 py-4 bg-slate-900/80 hover:bg-slate-800 text-slate-300 font-bold text-base rounded-xl text-center transition-all cursor-pointer border border-slate-700 hover:border-cyan-500/50 flex items-center justify-center gap-2 group shadow-sm hover:shadow-cyan-500/10\">\n                <FileText size={20} className=\"text-cyan-400 group-hover:text-cyan-300 transition-colors\" /> \n                <span className=\"group-hover:text-white transition-colors\">Subir PDF</span>\n                <input type=\"file\" accept=\"application/pdf\" className=\"hidden\" onChange={handlePdfUpload} />\n            </label>\n          </div>\n\n          <hr className=\"border-slate-800 mb-4\" />\n\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder=\"Buscar...\"\n              className=\"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 pl-10 text-sm text-white focus:ring-2 focus:ring-purple-500 transition-all placeholder:text-slate-500\"\n              value={searchTerm}\n              onChange={e => setSearchTerm(e.target.value)}\n            />\n            <span className=\"absolute left-3 top-3 text-slate-500\">üîç</span>\n          </div>\n\n          <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-slate-700\">\n            {categories.map(cat => (\n              <button\n                key={cat}\n                onClick={() => setActiveCategory(cat)}\n                className={`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-colors border ${activeCategory === cat ? 'bg-purple-500/20 border-purple-500 text-purple-300' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}\n              >\n                {cat}\n              </button>\n            ))}\n          </div>\n\n          {activeCategory === 'Signatures' ? (\n              <div className=\"space-y-3 flex-1 overflow-y-auto min-h-[200px]\">\n                  <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider flex justify-between\">\n                      <span>Gestor de Firmas ({signatures.length})</span>\n                  </label>\n                  \n                  <div className=\"bg-slate-900 p-3 rounded-lg border border-slate-800 space-y-3\">\n                      <label className=\"flex items-center justify-center w-full py-4 border-2 border-dashed border-slate-700 rounded-lg hover:border-purple-500 hover:bg-slate-800 transition-colors cursor-pointer group\">\n                          <div className=\"text-center\">\n                              <PenTool className=\"mx-auto h-6 w-6 text-slate-500 group-hover:text-purple-400\" />\n                              <span className=\"mt-2 block text-xs font-medium text-slate-400 group-hover:text-purple-300\">Subir Firma</span>\n                          </div>\n                          <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleSignatureUpload} />\n                      </label>\n                      \n                      <button \n                          onClick={autoStampSignatures}\n                          disabled={signatures.length === 0}\n                          className=\"w-full py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs font-bold rounded flex items-center justify-center gap-2 hover:from-purple-500 hover:to-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                          <Stamp size={14} /> Estampado Autom√°tico\n                      </button>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-3\">\n                      {signatures.map(sig => (\n                          <div key={sig.id} className=\"relative group bg-white/5 rounded-lg p-2 border border-slate-700 hover:border-purple-500 transition-colors\">\n                              <div className=\"aspect-[3/2] flex items-center justify-center bg-white/10 rounded mb-2 overflow-hidden\">\n                                  <img src={sig.url} alt=\"Firma\" className=\"max-w-full max-h-full object-contain\" />\n                              </div>\n                              <div className=\"flex gap-1\">\n                                  <button \n                                      onClick={() => addSignatureToCanvas(sig)}\n                                      className=\"flex-1 py-1 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold rounded\"\n                                  >\n                                      Usar\n                                  </button>\n                                  <button \n                                      onClick={() => setSignatures(signatures.filter(s => s.id !== sig.id))}\n                                      className=\"py-1 px-2 bg-red-900/50 hover:bg-red-900 text-red-400 rounded\"\n                                  >\n                                      <Trash2 size={12} />\n                                  </button>\n                              </div>\n                          </div>\n                      ))}\n                  </div>\n              </div>\n          ) : (\n          <div className=\"space-y-3 flex-1 overflow-y-auto min-h-[200px]\">\n            <label className=\"text-xs font-bold text-slate-500 uppercase tracking-wider flex justify-between\">\n              <span>Resultados ({filteredTemplates.length})</span>\n              {searchTerm && <span className=\"text-purple-400 cursor-pointer\" onClick={() => setSearchTerm('')}>Limpiar</span>}\n            </label>\n            <div className=\"grid grid-cols-2 gap-3\">\n              {filteredTemplates.map(t => (\n                <motion.button\n                  key={t.id}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  onClick={() => loadTemplate(t.id)}\n                  className={`aspect-[4/3] rounded-lg border border-slate-700 hover:border-purple-500 transition-all flex flex-col items-center justify-end p-2 overflow-hidden relative group ${t.thumbnail || 'bg-slate-800'}`}\n                >\n                  <div className={`absolute inset-0 opacity-50 group-hover:opacity-70 transition-opacity ${t.thumbnail}`}></div>\n                  <span className=\"relative z-10 text-[10px] font-bold text-white text-center bg-black/60 px-2 py-1 rounded backdrop-blur-sm w-full truncate\">\n                    {t.name}\n                  </span>\n                </motion.button>\n              ))}\n            </div>\n          </div>\n          )}\n\n          <hr className=\"border-slate-800\" />\n\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between items-center\">\n              <label className=\"text-xs font-bold text-blue-400 uppercase tracking-wider\">Variables Inteligentes</label>\n              <span className=\"w-2 h-2 rounded-full bg-blue-500 animate-pulse\" title=\"Conectado a Blockchain\"></span>\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-2\">\n              <button className=\"flex items-center justify-between p-2 rounded bg-blue-900/20 border border-blue-500/30 hover:bg-blue-900/40 text-blue-200 text-xs transition-colors group\" onClick={() => addSmartField('{{student_name}}')}>\n                <span>üë§ Estudiante</span>\n                <span className=\"opacity-0 group-hover:opacity-100 text-[10px] text-blue-400\">+ Agregar</span>\n              </button>\n              <button className=\"flex items-center justify-between p-2 rounded bg-purple-900/20 border border-purple-500/30 hover:bg-purple-900/40 text-purple-200 text-xs transition-colors group\" onClick={() => addSmartField('{{institution_name}}')}>\n                <span>üèõÔ∏è Instituci√≥n</span>\n                <span className=\"opacity-0 group-hover:opacity-100 text-[10px] text-purple-400\">+ Agregar</span>\n              </button>\n              <button className=\"flex items-center justify-between p-2 rounded bg-pink-900/20 border border-pink-500/30 hover:bg-pink-900/40 text-pink-200 text-xs transition-colors group\" onClick={() => addSmartField('{{course_name}}')}>\n                <span>üéì Curso/T√≠tulo</span>\n                <span className=\"opacity-0 group-hover:opacity-100 text-[10px] text-pink-400\">+ Agregar</span>\n              </button>\n              <button className=\"flex items-center justify-between p-2 rounded bg-orange-900/20 border border-orange-500/30 hover:bg-orange-900/40 text-orange-200 text-xs transition-colors group\" onClick={() => addSmartField('{{completion_date}}')}>\n                <span>üìÖ Fecha</span>\n                <span className=\"opacity-0 group-hover:opacity-100 text-[10px] text-orange-400\">+ Agregar</span>\n              </button>\n            </div>\n          </div>\n\n          <hr className=\"border-slate-800\" />\n\n\n          </>\n          )}\n\n          <div className=\"mt-auto pt-4 flex flex-col gap-3\">\n             <button onClick={saveAsTemplate} className=\"w-full py-2 rounded-lg border border-purple-500/50 text-purple-300 hover:bg-purple-900/20 font-medium text-xs flex items-center justify-center gap-2 transition-colors\">\n                <span>üíæ</span> Guardar como Plantilla\n             </button>\n             \n             <button \n                onClick={() => {\n                    const templateId = saveAsTemplate();\n                    if (templateId) {\n                        localStorage.setItem('activeTemplateId', templateId);\n                        if(onNavigate) onNavigate('masiva');\n                    }\n                }} \n                className=\"w-full py-3 rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold shadow-lg hover:scale-[1.02] transition-transform flex items-center justify-center gap-2\"\n             >\n                <span>üöÄ</span> Guardar y Continuar a Emisi√≥n\n             </button>\n\n             <div className=\"flex gap-2\">\n                <button onClick={onClose} className=\"flex-1 py-2 rounded-lg border border-slate-600 text-slate-300 hover:bg-slate-800 font-medium text-xs\">Cancelar</button>\n                <button onClick={handleExport} className=\"flex-1 py-2 rounded-lg bg-slate-800 border border-slate-600 text-white hover:bg-slate-700 font-medium text-xs\">\n                   Usar (1 Vez)\n                </button>\n             </div>\n          </div>\n        </div>\n\n        {/* Canvas Workspace */}\n        <div className=\"flex-1 min-w-0 w-full min-h-[50vh] lg:min-h-0 bg-slate-900 relative flex items-center justify-center p-8 bg-grid-slate-800/[0.2] order-1 lg:order-2\" ref={containerRef}>\n          <div \n             className=\"shadow-2xl ring-1 ring-slate-700/50 transition-transform duration-300 origin-center\"\n             style={{ transform: `scale(${scaleFactor})` }}\n          >\n            <canvas ref={canvasRef} />\n          </div>\n\n          {activeTooltip && (\n            <div\n              className=\"absolute pointer-events-none z-50 px-3 py-1.5 bg-blue-600 text-white text-xs font-bold rounded-full shadow-lg flex items-center gap-1 animate-bounce\"\n              style={{ top: activeTooltip.y, left: activeTooltip.x }}\n            >\n              <span className=\"text-sm\">üîó</span> {activeTooltip.text}\n            </div>\n          )}\n        </div>\n\n        {/* Right Sidebar - Properties & Layers */}\n        {!isPreviewMode && (\n        <div className=\"flex w-full lg:w-auto h-auto lg:h-full backdrop-blur-md bg-slate-950/90 border-l border-slate-800 z-20 flex-shrink-0 order-3 lg:order-3\">\n             <div className=\"w-full lg:w-80 flex flex-col bg-slate-950/50 overflow-hidden\">\n            \n             {/* Horizontal Quick Tools Strip */}\n            <div className=\"flex flex-wrap gap-1 p-2 border-b border-slate-800 bg-slate-900/80 items-center\">\n                <div className=\"flex items-center gap-2 mr-auto\">\n                    <button onClick={undo} disabled={history.length <= 1} className=\"group relative p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors flex items-center justify-center disabled:opacity-30 disabled:cursor-not-allowed border border-transparent hover:border-slate-700\" title=\"Deshacer\">\n                        <Undo2 size={18} />\n                        <span className=\"absolute top-full mt-1 left-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700\">Deshacer</span>\n                    </button>\n                    \n                    <div className=\"w-px h-6 bg-slate-700 mx-2\"></div>\n                    \n                    <button onClick={redo} disabled={redoHistory.length === 0} className=\"group relative p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors flex items-center justify-center disabled:opacity-30 disabled:cursor-not-allowed border border-transparent hover:border-slate-700\" title=\"Rehacer\">\n                        <Redo2 size={18} />\n                        <span className=\"absolute top-full mt-1 left-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700\">Rehacer</span>\n                    </button>\n                </div>\n\n                <div className=\"w-px bg-slate-700 mx-2 self-stretch\"></div>\n                <button onClick={() => addText()} className=\"group relative p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors flex items-center justify-center\" title=\"Agregar Texto\">\n                    <Type size={18} />\n                    <span className=\"absolute top-full mt-1 right-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700\">Texto</span>\n                </button>\n                <button onClick={addRect} className=\"group relative p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors flex items-center justify-center\" title=\"Agregar Rect√°ngulo\">\n                    <div className=\"w-4 h-4 border-2 border-current rounded-sm\"></div>\n                    <span className=\"absolute top-full mt-1 right-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700\">Rect√°ngulo</span>\n                </button>\n                <label className=\"group relative p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors cursor-pointer flex items-center justify-center\" title=\"Subir Imagen\">\n                    <ImageIcon size={18} />\n                    <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleImageUpload} />\n                    <span className=\"absolute top-full mt-1 right-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700\">Imagen</span>\n                </label>\n                <button onClick={() => fabricCanvas?.discardActiveObject().requestRenderAll()} className=\"group relative p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-colors flex items-center justify-center\" title=\"Deseleccionar\">\n                    <MousePointer2 size={18} />\n                    <span className=\"absolute top-full mt-1 right-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700\">Deseleccionar</span>\n                </button>\n                <button onClick={() => {\n                    const activeObj = fabricCanvas?.getActiveObject();\n                    if (activeObj) handleLayerAction('delete', activeObj);\n                }} className=\"group relative p-2 rounded-lg text-red-400 hover:text-red-300 hover:bg-red-900/30 transition-colors flex items-center justify-center\" title=\"Eliminar (Supr)\">\n                    <Trash2 size={18} />\n                    <span className=\"absolute top-full mt-1 right-0 px-2 py-1 bg-slate-900 text-[10px] rounded opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-50 border border-slate-700 text-red-300\">Eliminar</span>\n                </button>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-6 flex flex-col gap-6\">\n            \n            {/* Properties Panel */}\n            <div>\n                <div className=\"flex items-center gap-2 mb-4\">\n                    <span className=\"text-xl\">‚öôÔ∏è</span>\n                    <h3 className=\"text-sm font-bold text-white uppercase tracking-wider\">Propiedades</h3>\n                </div>\n                \n                {selectedObject ? (\n                    <div className=\"space-y-4\">\n                        <div className=\"p-3 bg-slate-900 rounded border border-slate-800\">\n                             <div className=\"flex items-center gap-2 mb-2\">\n                                 <span className=\"text-xs text-slate-400 font-mono\">ID: {selectedObject.type}</span>\n                             </div>\n                             \n                             <div className=\"grid grid-cols-2 gap-3 mb-4\">\n                               <div className=\"bg-slate-900/50 p-2 rounded border border-slate-800\">\n                                   <label className=\"text-[10px] text-blue-400 uppercase font-bold flex items-center gap-1 mb-1\">\n                                       <ArrowRightFromLine size={10} /> Horizontal (X)\n                                   </label>\n                                   <input \n                                       type=\"number\" \n                                       value={Math.round(selectedObject.left || 0)} \n                                       onChange={(e) => updateObjectProperty('left', parseFloat(e.target.value))}\n                                       className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white focus:border-blue-500 transition-colors\"\n                                   />\n                               </div>\n                               <div className=\"bg-slate-900/50 p-2 rounded border border-slate-800\">\n                                   <label className=\"text-[10px] text-purple-400 uppercase font-bold flex items-center gap-1 mb-1\">\n                                       <ArrowDownFromLine size={10} /> Vertical (Y)\n                                   </label>\n                                   <input \n                                       type=\"number\" \n                                       value={Math.round(selectedObject.top || 0)} \n                                       onChange={(e) => updateObjectProperty('top', parseFloat(e.target.value))}\n                                       className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white focus:border-purple-500 transition-colors\"\n                                   />\n                               </div>\n                            </div>\n                            \n                            <div className=\"grid grid-cols-2 gap-2 mb-4\">\n                                <button \n                                    onClick={() => {\n                                        if (fabricCanvas && selectedObject) {\n                                            selectedObject.centerH();\n                                            fabricCanvas.requestRenderAll();\n                                            updateLayers();\n                                        }\n                                    }}\n                                    className=\"py-2 px-3 bg-slate-800 hover:bg-blue-900/30 border border-slate-700 hover:border-blue-500/50 rounded text-[10px] text-slate-300 hover:text-blue-300 flex items-center justify-center gap-2 transition-all group\"\n                                    title=\"Centrar Horizontalmente\"\n                                >\n                                    <AlignHorizontalJustifyCenter size={14} className=\"group-hover:scale-110 transition-transform\" /> \n                                    <span>Centrar Horiz.</span>\n                                </button>\n                                <button \n                                    onClick={() => {\n                                        if (fabricCanvas && selectedObject) {\n                                            selectedObject.centerV();\n                                            fabricCanvas.requestRenderAll();\n                                            updateLayers();\n                                        }\n                                    }}\n                                    className=\"py-2 px-3 bg-slate-800 hover:bg-purple-900/30 border border-slate-700 hover:border-purple-500/50 rounded text-[10px] text-slate-300 hover:text-purple-300 flex items-center justify-center gap-2 transition-all group\"\n                                    title=\"Centrar Verticalmente\"\n                                >\n                                    <AlignVerticalJustifyCenter size={14} className=\"group-hover:scale-110 transition-transform\" /> \n                                    <span>Centrar Vert.</span>\n                                </button>\n                            </div>\n\n                            <div className=\"mb-4 bg-slate-900/50 p-2 rounded border border-slate-800\">\n                                <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Escala ({Math.round((selectedObject.scaleX || 1) * 100)}%)</label>\n                                <input \n                                    type=\"range\" \n                                    min=\"0.1\" \n                                    max=\"3\" \n                                    step=\"0.1\"\n                                    value={selectedObject.scaleX || 1} \n                                    onChange={(e) => updateObjectProperty('scale', e.target.value)}\n                                    className=\"w-full accent-purple-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer\"\n                                />\n                             </div>\n\n                             <div className=\"grid grid-cols-2 gap-3 mb-4\">\n                               <div className=\"bg-slate-900/50 p-2 rounded border border-slate-800\">\n                                   <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Ancho (W)</label>\n                                   <input \n                                       type=\"number\" \n                                       value={Math.round(selectedObject.getScaledWidth())} \n                                       onChange={(e) => updateObjectProperty('width', parseFloat(e.target.value))}\n                                       className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white focus:border-blue-500 transition-colors\"\n                                   />\n                               </div>\n                               <div className=\"bg-slate-900/50 p-2 rounded border border-slate-800\">\n                                   <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Alto (H)</label>\n                                   <input \n                                       type=\"number\" \n                                       value={Math.round(selectedObject.getScaledHeight())} \n                                       onChange={(e) => updateObjectProperty('height', parseFloat(e.target.value))}\n                                       className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white focus:border-purple-500 transition-colors\"\n                                   />\n                               </div>\n                            </div>\n\n                             <div className=\"pt-2 border-t border-slate-800 mb-2\">\n                                <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Opacidad ({Math.round((selectedObject.opacity || 1) * 100)}%)</label>\n                                <input \n                                    type=\"range\" \n                                    min=\"0\" \n                                    max=\"1\" \n                                    step=\"0.01\"\n                                    value={selectedObject.opacity ?? 1} \n                                    onChange={(e) => updateObjectProperty('opacity', parseFloat(e.target.value))}\n                                    className=\"w-full accent-purple-500 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer\"\n                                />\n                             </div>\n\n                             <div className=\"grid grid-cols-2 gap-2 mb-2\">\n                                <div>\n                                    <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Borde</label>\n                                    <div className=\"flex gap-1 items-center\">\n                                         <input \n                                            type=\"color\" \n                                            value={selectedObject.stroke || '#000000'} \n                                            onChange={(e) => updateObjectProperty('stroke', e.target.value)}\n                                            className=\"h-6 w-8 bg-transparent cursor-pointer rounded border border-slate-600\"\n                                        />\n                                        <button onClick={() => updateObjectProperty('stroke', null)} className=\"text-[10px] text-red-400 hover:bg-slate-800 p-1 rounded\" title=\"Quitar Borde\">‚úï</button>\n                                    </div>\n                                </div>\n                                <div>\n                                    <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Grosor</label>\n                                    <input \n                                        type=\"number\" \n                                        min=\"0\"\n                                        value={selectedObject.strokeWidth || 0} \n                                        onChange={(e) => updateObjectProperty('strokeWidth', parseFloat(e.target.value))}\n                                        className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white\"\n                                    />\n                                </div>\n                             </div>\n\n                             <div className=\"pt-2 border-t border-slate-800 mb-2\">\n                                <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Sombra</label>\n                                <div className=\"flex gap-2 items-center mb-2\">\n                                    <input \n                                        type=\"checkbox\" \n                                        checked={!!selectedObject.shadow} \n                                        onChange={(e) => {\n                                            if (e.target.checked) {\n                                                updateObjectProperty('shadow', new Shadow({ color: 'rgba(0,0,0,0.5)', blur: 10, offsetX: 5, offsetY: 5 }));\n                                            } else {\n                                                updateObjectProperty('shadow', null);\n                                            }\n                                        }}\n                                        className=\"accent-purple-500 rounded sm:w-4 sm:h-4\"\n                                    />\n                                    <span className=\"text-xs text-slate-300\">Activar Sombra</span>\n                                </div>\n                                {selectedObject.shadow && (\n                                    <div className=\"grid grid-cols-2 gap-2 pl-2 border-l-2 border-slate-800\">\n                                        <div>\n                                            <label className=\"text-[9px] text-slate-500 uppercase block mb-0.5\">Color</label>\n                                            <input \n                                                type=\"color\" \n                                                value={selectedObject.shadow.color || '#000000'} \n                                                onChange={(e) => {\n                                                    const s = selectedObject.shadow;\n                                                    s.color = e.target.value;\n                                                    // Re-assign to trigger update\n                                                    updateObjectProperty('shadow', new Shadow(s));\n                                                }}\n                                                className=\"h-5 w-full bg-transparent cursor-pointer rounded\"\n                                            />\n                                        </div>\n                                        <div>\n                                            <label className=\"text-[9px] text-slate-500 uppercase block mb-0.5\">Blur</label>\n                                            <input \n                                                type=\"number\" \n                                                value={selectedObject.shadow.blur || 0} \n                                                onChange={(e) => {\n                                                    const s = selectedObject.shadow;\n                                                    s.blur = parseFloat(e.target.value);\n                                                    updateObjectProperty('shadow', new Shadow(s));\n                                                }}\n                                                className=\"w-full bg-slate-800 border border-slate-700 rounded px-1 py-0.5 text-xs text-white\"\n                                            />\n                                        </div>\n                                        <div>\n                                            <label className=\"text-[9px] text-slate-500 uppercase block mb-0.5\">X Offset</label>\n                                            <input \n                                                type=\"number\" \n                                                value={selectedObject.shadow.offsetX || 0} \n                                                onChange={(e) => {\n                                                    const s = selectedObject.shadow;\n                                                    s.offsetX = parseFloat(e.target.value);\n                                                    updateObjectProperty('shadow', new Shadow(s));\n                                                }}\n                                                className=\"w-full bg-slate-800 border border-slate-700 rounded px-1 py-0.5 text-xs text-white\"\n                                            />\n                                        </div>\n                                        <div>\n                                            <label className=\"text-[9px] text-slate-500 uppercase block mb-0.5\">Y Offset</label>\n                                            <input \n                                                type=\"number\" \n                                                value={selectedObject.shadow.offsetY || 0} \n                                                onChange={(e) => {\n                                                    const s = selectedObject.shadow;\n                                                    s.offsetY = parseFloat(e.target.value);\n                                                    updateObjectProperty('shadow', new Shadow(s));\n                                                }}\n                                                className=\"w-full bg-slate-800 border border-slate-700 rounded px-1 py-0.5 text-xs text-white\"\n                                            />\n                                        </div>\n                                    </div>\n                                )}\n                             </div>\n\n                             {(selectedObject.type === 'i-text' || selectedObject.type === 'text') && (\n                                 <div className=\"space-y-2 pt-2 border-t border-slate-800\">\n                                     <div>\n                                        <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Texto</label>\n                                        <input \n                                            type=\"text\" \n                                            value={selectedObject.text} \n                                            onChange={(e) => updateObjectProperty('text', e.target.value)}\n                                            className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white\"\n                                            disabled={selectedObject.data?.isSmart}\n                                        />\n                                     </div>\n                                     <div>\n                                        <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Color</label>\n                                        <div className=\"flex gap-2\">\n                                            <input \n                                                type=\"color\" \n                                                value={selectedObject.fill} \n                                                onChange={(e) => updateObjectProperty('fill', e.target.value)}\n                                                className=\"h-6 w-8 bg-transparent cursor-pointer rounded\"\n                                            />\n                                            <input \n                                                type=\"text\" \n                                                value={selectedObject.fill} \n                                                onChange={(e) => updateObjectProperty('fill', e.target.value)}\n                                                className=\"flex-1 bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white font-mono\"\n                                            />\n                                        </div>\n                                     </div>\n                                     <div>\n                                        <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Fuente</label>\n                                        <select \n                                            value={selectedObject.fontFamily} \n                                            onChange={(e) => updateObjectProperty('fontFamily', e.target.value)}\n                                            className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white\"\n                                        >\n                                            {['Inter', 'Roboto', 'Orbitron', 'JetBrains Mono', 'Dancing Script', 'Pinyon Script', 'Arial', 'Times New Roman'].map(f => (\n                                                <option key={f} value={f}>{f}</option>\n                                            ))}\n                                        </select>\n                                     </div>\n                                     <div>\n                                        <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Tipo de Dato (IA)</label>\n                                        <select \n                                            value={selectedObject.data?.dataType || 'text'} \n                                            onChange={(e) => {\n                                                const val = e.target.value;\n                                                selectedObject.data = { ...selectedObject.data, dataType: val };\n                                                if (val === 'competence') {\n                                                    toast('Elemento marcado como Competencia para IA', { icon: 'üß†' });\n                                                }\n                                                fabricCanvas.requestRenderAll();\n                                                updateLayers();\n                                            }}\n                                            className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white\"\n                                        >\n                                            <option value=\"text\">Texto Simple</option>\n                                            <option value=\"student_name\">Nombre Estudiante</option>\n                                            <option value=\"institution\">Instituci√≥n</option>\n                                            <option value=\"date\">Fecha</option>\n                                            <option value=\"competence\">Competencia / Habilidad</option>\n                                            <option value=\"project\">Proyecto Destacado</option>\n                                        </select>\n\n                                     </div>\n                                      <div>\n                                        <label className=\"text-[10px] text-slate-500 uppercase font-bold block mb-1\">Tama√±o Fuente</label>\n                                        <input \n                                            type=\"number\" \n                                            value={selectedObject.fontSize} \n                                            onChange={(e) => updateObjectProperty('fontSize', parseInt(e.target.value))}\n                                            className=\"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-white\"\n                                        />\n                                     </div>\n                                 </div>\n                             )}\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-2\">\n                            <button onClick={() => handleLayerAction('bringForward', selectedObject)} className=\"p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-slate-300 flex items-center justify-center gap-1\" title=\"Subir una capa\">\n                                <ChevronUp size={14} /> Subir\n                            </button>\n                            <button onClick={() => handleLayerAction('sendBackward', selectedObject)} className=\"p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-slate-300 flex items-center justify-center gap-1\" title=\"Bajar una capa\">\n                                <ChevronDown size={14} /> Bajar\n                            </button>\n                            <button onClick={() => handleLayerAction('bringToFront', selectedObject)} className=\"p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-slate-300 flex items-center justify-center gap-1\" title=\"Traer al frente\">\n                                <BringToFront size={14} /> Al Frente\n                            </button>\n                            <button onClick={() => handleLayerAction('sendToBack', selectedObject)} className=\"p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-slate-300 flex items-center justify-center gap-1\" title=\"Enviar al fondo\">\n                                <SendToBack size={14} /> Al Fondo\n                            </button>\n                             <button onClick={() => handleLayerAction('delete', selectedObject)} className=\"col-span-2 p-2 bg-red-900/30 hover:bg-red-900/50 border border-red-900/50 rounded text-xs text-red-400 flex items-center justify-center gap-1\">\n                                <Trash2 size={14} /> Eliminar Elemento\n                            </button>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"p-4 bg-slate-900/50 rounded border border-slate-800 border-dashed text-center text-slate-500 text-xs\">\n                        Selecciona un elemento para editar sus propiedades.\n                    </div>\n                )}\n            </div>\n\n            <hr className=\"border-slate-800\" />\n\n            <div className=\"flex-1 overflow-hidden flex flex-col\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                    <span className=\"text-xl\">üìö</span>\n                    <h3 className=\"text-sm font-bold text-white uppercase tracking-wider\">Capas ({layers.length})</h3>\n                </div>\n\n                <div className=\"flex-1 overflow-y-auto space-y-1 pr-1 scrollbar-thin scrollbar-thumb-slate-700\">\n                    {layers.map((layer, index) => {\n                        const isSelected = selectedObject === layer;\n                        return (\n                            <div \n                                key={index}\n                                onClick={() => {\n                                    fabricCanvas.setActiveObject(layer);\n                                    fabricCanvas.requestRenderAll();\n                                }}\n                                className={`group flex items-center gap-2 p-2 rounded cursor-pointer transition-colors border ${isSelected ? 'bg-purple-900/30 border-purple-500/50' : 'bg-slate-900 border-transparent hover:border-slate-700'}`}\n                            >\n                                <div className=\"text-slate-500\">\n                                    {layer.type === 'i-text' || layer.type === 'text' ? <Type size={14} /> : \n                                     layer.type === 'image' ? <ImageIcon size={14} /> : \n                                     <LayoutTemplate size={14} />}\n                                </div>\n                                <span className={`text-xs font-medium truncate flex-1 ${isSelected ? 'text-purple-300' : 'text-slate-300'}`}>\n                                    {getLayerName(layer)}\n                                </span>\n                                \n                                <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                    <button \n                                        onClick={(e) => { e.stopPropagation(); handleLayerAction('lock', layer); }}\n                                        className={`p-1 rounded hover:bg-slate-700 ${layer.lockMovementX ? 'text-orange-400' : 'text-slate-500'}`}\n                                        title={layer.lockMovementX ? \"Desbloquear\" : \"Bloquear\"}\n                                    >\n                                        {layer.lockMovementX ? <Lock size={12} /> : <Unlock size={12} />}\n                                    </button>\n                                    <button \n                                        onClick={(e) => { e.stopPropagation(); handleLayerAction('delete', layer); }}\n                                        className=\"p-1 rounded hover:bg-red-900/50 text-slate-400 hover:text-red-400\"\n                                        title=\"Eliminar\"\n                                    >\n                                        <Trash2 size={12} />\n                                    </button>\n                                </div>\n                            </div>\n                        );\n                    })}\n                    {layers.length === 0 && (\n                        <div className=\"text-center py-4 text-slate-600 text-xs italic\">\n                            Lienzo vac√≠o. Agrega elementos.\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <div className=\"mt-4 pt-4 border-t border-slate-800\">\n                 <button \n                    onClick={() => {\n                        if (!fabricCanvas) return;\n                        const qrSize = 100;\n                        FabricImage.fromURL('https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=Demo', { crossOrigin: 'anonymous' }).then(img => {\n                             img.set({\n                                 left: fabricCanvas.width - 100,\n                                 top: fabricCanvas.height - 100,\n                                 originX: 'center',\n                                 originY: 'center',\n                                 scaleX: 0.8,\n                                 scaleY: 0.8,\n                                 data: { name: 'QR de Verificaci√≥n', isQR: true }\n                             });\n                             fabricCanvas.add(img);\n                             fabricCanvas.setActiveObject(img);\n                             updateLayers();\n                             toast.success('Widget QR de Transparencia a√±adido (Enlace a Smart CV)');\n                        });\n                    }}\n                    className=\"w-full py-3 bg-slate-900 border border-slate-700 hover:border-blue-500 rounded-lg flex items-center justify-center gap-3 text-slate-300 hover:text-blue-400 transition-all group\"\n                 >\n                    <div className=\"bg-white p-1 rounded\">\n                        <div className=\"w-4 h-4 bg-black\"></div>\n                    </div>\n                    <span className=\"text-xs font-bold\">Agregar QR de Transparencia</span>\n                 </button>\n            </div>\n\n        </div>\n        </div>\n        </div>\n        )}\n\n      </motion.div>\n    </motion.div>\n  );\n};\n\nexport default CertificateDesigner;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ComenzarGratisPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreateCertificatePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreateCredentialsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreateDegreePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreateDiplomaPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreatorDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreatorDesignerPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreatorIssuance.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreatorSubscriptionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreatorsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CredentialPreview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CreditRecharge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\CyberBackground.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\DashboardRedirect.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\DemoScheduler.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\DeveloperPortal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\EmployerDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'handleImageUpload' is assigned a value but never used.","line":355,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":355,"endColumn":26},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":672,"column":50,"nodeType":"JSXOpeningElement","endLine":672,"endColumn":161}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Scan, Upload, Search, FileText, CheckCircle, XCircle, Camera, Shield, Lock, MapPin } from 'lucide-react';\nimport { Html5Qrcode } from 'html5-qrcode';\nimport n8nService from './services/n8nService';\nimport { toast, Toaster } from 'react-hot-toast';\nimport { toGateway } from './utils/ipfsUtils';\n\nconst EmployerDashboard = () => {\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('scan'); // scan, search, cv-validation\n  const [verificationResult, setVerificationResult] = useState(null);\n  const [bulkResults, setBulkResults] = useState([]);\n  const [, setLoading] = useState(false);\n  const [scanResult, setScanResult] = useState(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [activeFilter, setActiveFilter] = useState(null); // Filter state\n  const [, setJobDescriptionFile] = useState(null);\n  const [, setCvFiles] = useState([]);\n  const [cvValidationResults, setCvValidationResults] = useState([]);\n  const [generatingReport, setGeneratingReport] = useState(false);\n  const scannerRef = useRef(null);\n\n  // Employer Branding State\n  const [employerName, setEmployerName] = useState('Tech Recruiters Inc.');\n  const [employerLogo, setEmployerLogo] = useState(toGateway('ipfs://bafkreicickkyjjn3ztitciypfh635lqowdskzbv54fiqbrhs4zbmwhjv4q'));\n  const [isEditingName, setIsEditingName] = useState(false);\n\n  const handleLogoUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setEmployerLogo(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Mock Talents Data with Blockchain Info\n  const mockTalents = [];\n\n  // Quick filters for Smart Matching\n  const smartFilters = [\n      { id: 'solidity', label: 'Solidity', icon: '‚ö°' },\n      { id: 'security', label: 'Ciberseguridad', icon: 'üîí' },\n      { id: 'defi', label: 'DeFi', icon: 'üí∏' },\n      { id: 'react', label: 'React / Frontend', icon: 'üé®' },\n      { id: 'verified', label: 'Verificaci√≥n de Identidad', icon: '‚úÖ' },\n      { id: 'smart-match', label: 'IA Smart Match', icon: 'üß†', special: true }\n  ];\n\n  const handleJobDescriptionUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n        setJobDescriptionFile(file);\n        // Simulate n8n processing\n        toast.loading('Analizando descripci√≥n del cargo con IA...');\n        setTimeout(() => {\n            toast.dismiss();\n            toast.success('Perfil de cargo analizado. Filtrando candidatos...');\n            setActiveFilter('smart-match');\n            setSearchQuery(''); \n        }, 2000);\n    }\n  };\n\n  const handleCvValidation = async (e) => {\n    if (!e.target.files || e.target.files.length === 0) return;\n    \n    const files = Array.from(e.target.files);\n    setCvFiles(files);\n    setLoading(true);\n    toast.loading(`Analizando ${files.length} documentos...`);\n\n    // Initialize results\n    const results = files.map(f => ({\n        id: Math.random().toString(36).substr(2, 9),\n        fileName: f.name,\n        size: f.size,\n        status: 'processing'\n    }));\n    setCvValidationResults(results);\n\n    // Simulate sequential processing\n    const finalResults = [...results];\n    \n    for (let i = 0; i < files.length; i++) {\n        // Simulate n8n processing time\n        await new Promise(r => setTimeout(r, 1200));\n        \n        // Generate generic data based on file\n        const candidate = {\n            name: `Candidato ${i + 1}`,\n            skills: ['Verificado', 'Blockchain', 'Smart Contracts'],\n            score: Math.floor(Math.random() * (99 - 85) + 85)\n        };\n\n        finalResults[i] = {\n            ...finalResults[i],\n            status: 'valid',\n            candidateName: candidate.name,\n            matchScore: candidate.score,\n            verifiedSkills: candidate.skills,\n            identityVerified: true,\n            blockchainProof: '0x' + Array(40).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('')\n        };\n        \n        setCvValidationResults([...finalResults]);\n    }\n\n    setLoading(false);\n    toast.dismiss();\n    toast.success(`${files.length} CVs validados y procesados`);\n  };\n\n  const handleDownloadReport = async () => {\n    if (cvValidationResults.length === 0) return;\n    \n    setGeneratingReport(true);\n    toast.loading('Generando Reporte de Veracidad Consolidado...');\n\n    try {\n        const reportData = {\n            recruiterId: 'employer-123',\n            totalFiles: cvValidationResults.length,\n            validCount: cvValidationResults.filter(r => r.status === 'valid').length,\n            results: cvValidationResults\n        };\n\n        const res = await n8nService.generateEmployerReport(reportData);\n        \n        if (res.success) {\n            toast.dismiss();\n            toast.success('Reporte generado y enviado a tu correo', { duration: 5000 });\n            // In a real app, we might open the PDF URL directly:\n            // window.open(res.reportUrl, '_blank');\n        } else {\n            throw new Error(res.message);\n        }\n    } catch (error) {\n        console.error('Report error:', error);\n        toast.dismiss();\n        toast.error('Error generando reporte');\n    } finally {\n        setGeneratingReport(false);\n    }\n  };\n\n  const handleContact = () => {\n      toast('üîí Funci√≥n Premium: Suscr√≠bete para contactar talento verificado', {\n          icon: 'üíé',\n          style: {\n              borderRadius: '10px',\n              background: '#333',\n              color: '#fff',\n          },\n      });\n      setTimeout(() => navigate('/precios?tab=employers'), 1500);\n  };\n\n  // Cleanup scanner on unmount\n  useEffect(() => {\n    return () => {\n      if (scannerRef.current) {\n        scannerRef.current.clear().catch(error => console.error('Failed to clear scanner', error));\n      }\n    };\n  }, []);\n\n  const startScanner = async () => {\n    try {\n        const scannerId = \"reader\";\n        if (!document.getElementById(scannerId)) return;\n        \n        // If already running, stop first\n        if (scannerRef.current) {\n            try {\n                await scannerRef.current.stop();\n            } catch (e) { \n                // ignore stop error \n            }\n        }\n\n        const html5QrCode = new Html5Qrcode(scannerId);\n        scannerRef.current = html5QrCode;\n\n        await html5QrCode.start(\n            { facingMode: \"environment\" },\n            {\n                fps: 10,\n                qrbox: { width: 250, height: 250 },\n                aspectRatio: 1.0\n            },\n            (decodedText) => {\n                console.log('QR Code scanned:', decodedText);\n                setScanResult(decodedText);\n                html5QrCode.stop().then(() => {\n                    scannerRef.current = null;\n                    setIsScanning(false);\n                });\n                toast.success('C√≥digo QR detectado');\n                verifyCredential(decodedText);\n            },\n            (errorMessage) => {\n                // ignore\n            }\n        );\n        setIsScanning(true);\n    } catch (err) {\n        console.error(\"Error starting scanner\", err);\n        toast.error(\"No se pudo acceder a la c√°mara\");\n        setIsScanning(false);\n    }\n  };\n\n  const handleBulkScan = async (e) => {\n      if (!e.target.files || e.target.files.length === 0) return;\n      \n      const files = Array.from(e.target.files);\n      \n      // Stop scanner if running\n      if (scannerRef.current && scannerRef.current.isScanning) {\n          try {\n              await scannerRef.current.stop();\n          } catch (e) { }\n          setIsScanning(false);\n      }\n      \n      setLoading(true);\n      setBulkResults([]);\n      setScanResult(null); \n      setVerificationResult(null);\n\n      toast.loading(`Procesando ${files.length} im√°genes...`);\n\n      const results = [];\n      const scannerId = \"reader\";\n      let html5QrCode = scannerRef.current;\n      \n      if (!html5QrCode) {\n          try {\n              html5QrCode = new Html5Qrcode(scannerId);\n              scannerRef.current = html5QrCode;\n          } catch (e) {\n               // Ignore if already exists\n          }\n      }\n\n      for (const file of files) {\n          try {\n              const decodedText = await html5QrCode.scanFile(file, false);\n              const verification = await getVerificationData(decodedText);\n              \n              results.push({\n                  id: Math.random().toString(36).substr(2, 9),\n                  fileName: file.name,\n                  status: 'success',\n                  qrData: decodedText,\n                  verification: verification\n              });\n          } catch (err) {\n              console.error(`Error scanning ${file.name}`, err);\n              results.push({\n                  id: Math.random().toString(36).substr(2, 9),\n                  fileName: file.name,\n                  status: 'error',\n                  error: 'No se detect√≥ c√≥digo QR'\n              });\n          }\n      }\n\n      setBulkResults(results);\n      setLoading(false);\n      toast.dismiss();\n      \n      const successCount = results.filter(r => r.status === 'success').length;\n      if (successCount > 0) {\n          toast.success(`${successCount} de ${files.length} c√≥digos detectados`);\n          \n          // If only 1 file and success, use single result view\n          if (files.length === 1 && results[0].status === 'success') {\n              setScanResult(results[0].qrData);\n              setVerificationResult(results[0].verification);\n              setBulkResults([]); \n          }\n      } else {\n          toast.error(\"No se detectaron c√≥digos QR\");\n      }\n  };\n\n  const getVerificationData = async (qrData) => {\n      try {\n          // Try to parse JSON for Certificate Data\n          let credentialData = null;\n          try {\n              const parsed = JSON.parse(qrData);\n              if (parsed.tokenId && parsed.serialNumber) {\n                  credentialData = parsed;\n              }\n          } catch (e) {\n              // Not JSON, treat as raw string or URL\n          }\n\n          if (credentialData) {\n              // It's a certificate!\n              // For demo purposes, we'll simulate a fetch using the parsed data\n              await new Promise(r => setTimeout(r, 500));\n              \n              return {\n                  type: 'credential',\n                  valid: true,\n                  data: {\n                      title: 'Certificado Blockchain',\n                      tokenId: credentialData.tokenId,\n                      serialNumber: credentialData.serialNumber,\n                      student: 'Estudiante Verificado', \n                      issuer: 'Instituci√≥n Verificada',\n                      date: new Date().toLocaleDateString()\n                  }\n              };\n          } else {\n               await new Promise(r => setTimeout(r, 200));\n               return {\n                  type: 'credential', \n                  valid: true,\n                  data: {\n                      title: 'Datos Escaneados',\n                      student: 'Informaci√≥n Cruda',\n                      issuer: 'Desconocido',\n                      raw: qrData,\n                      date: new Date().toLocaleDateString()\n                  }\n              };\n          }\n      } catch (e) {\n          return { valid: false, error: 'Error verificando credencial' };\n      }\n  };\n\n  const verifyCredential = async (qrData) => {\n      setLoading(true);\n      try {\n          const result = await getVerificationData(qrData);\n          setVerificationResult(result);\n      } catch (e) {\n          toast.error('Error verificando credencial');\n      } finally {\n          setLoading(false);\n      }\n  };\n\n  const handleImageUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n  };\n\n  const reset = async () => {\n      setVerificationResult(null);\n      setScanResult(null);\n      setBulkResults([]);\n      setCvFiles([]);\n      setCvValidationResults([]);\n      if (activeTab === 'scan' && scannerRef.current) {\n          try {\n              if (scannerRef.current.isScanning) {\n                  await scannerRef.current.stop();\n              }\n              scannerRef.current = null;\n          } catch (e) {\n              console.error(\"Error stopping scanner\", e);\n          }\n      }\n      setIsScanning(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[#0F172A] text-white pt-24 pb-12 px-4\">\n      <Toaster position=\"top-center\" />\n      \n      {/* Top Navigation Bar */}\n      <nav className=\"fixed top-0 left-0 right-0 z-50 bg-[#0F172A]/90 backdrop-blur-md border-b border-slate-800 h-16 px-6 flex items-center justify-between shadow-lg\">\n          <div className=\"flex items-center gap-4\">\n              {/* Logo Upload */}\n              <div className=\"relative group w-10 h-10\">\n                  <div className=\"w-10 h-10 rounded-full bg-slate-800 border border-slate-600 overflow-hidden flex items-center justify-center\">\n                      <img src={employerLogo} alt=\"Employer logo\" className=\"w-full h-full object-cover\" />\n                  </div>\n                  <label className=\"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer\">\n                      <span className=\"text-[8px] font-bold text-white\">EDIT</span>\n                      <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleLogoUpload} />\n                  </label>\n              </div>\n\n              {/* Editable Name */}\n              {isEditingName ? (\n                  <input\n                      type=\"text\"\n                      value={employerName}\n                      onChange={(e) => setEmployerName(e.target.value)}\n                      onBlur={() => setIsEditingName(false)}\n                      onKeyDown={(e) => e.key === 'Enter' && setIsEditingName(false)}\n                      className=\"bg-slate-800 border border-slate-600 text-white rounded px-2 py-1 text-sm font-bold focus:border-blue-500 outline-none\"\n                      autoFocus\n                  />\n              ) : (\n                  <div \n                      className=\"group flex items-center gap-2 cursor-pointer\"\n                      onClick={() => setIsEditingName(true)}\n                  >\n                      <h1 className=\"text-lg font-bold font-display text-white group-hover:text-blue-400 transition-colors\">{employerName}</h1>\n                      <span className=\"text-xs text-slate-500 opacity-0 group-hover:opacity-100 transition-opacity\">‚úèÔ∏è</span>\n                  </div>\n              )}\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n               <span className=\"hidden md:flex items-center gap-2 text-xs font-medium text-slate-400 bg-slate-800/50 px-3 py-1 rounded-full border border-slate-700\">\n                    <span className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></span>\n                    Vista Empleador\n               </span>\n               <button onClick={() => navigate('/precios?tab=employers')} className=\"hidden md:flex items-center gap-2 btn-primary text-xs px-3 py-1.5\">\n                    <Shield size={14} />\n                    <span>Mejorar Plan</span>\n               </button>\n               <Link to=\"/\" className=\"text-xs font-bold bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20 px-3 py-1.5 rounded-lg transition-all\">\n                    Salir\n               </Link>\n          </div>\n      </nav>\n\n      <div className=\"max-w-6xl mx-auto\">\n        \n        {/* Simulation Banner - Removed as it's now in top bar / redundant */}\n\n        {/* Simplified Header */}\n        <header className=\"mb-10 flex flex-col md:flex-row items-center justify-between gap-6 max-w-6xl mx-auto px-4\">\n            <div className=\"flex items-center gap-4\">\n                {/* Branding moved to Top Bar, keeping simplified welcome or stats here if needed, or removing */}\n                <div>\n                    <h2 className=\"text-2xl font-bold font-display mb-1\">Bienvenido, {employerName}</h2>\n                    <div className=\"flex items-center gap-2 text-slate-400 text-sm\">\n                        <span className=\"bg-blue-500/10 text-blue-400 px-2 py-0.5 rounded text-xs font-bold border border-blue-500/20\">EMPRESA VERIFICADA</span>\n                        <span>‚Ä¢</span>\n                        <span>Portal de Gesti√≥n de Talento</span>\n                    </div>\n                </div>\n            </div>\n        </header>\n\n        <div className=\"grid md:grid-cols-4 gap-6\">\n            {/* Sidebar / Tabs */}\n            <div className=\"md:col-span-1 space-y-2\">\n                <button \n                    onClick={() => { setActiveTab('scan'); reset(); }}\n                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'scan' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' : 'bg-slate-800/50 text-slate-400 hover:bg-slate-800'}`}\n                >\n                    <Scan size={20} />\n                    <span className=\"font-medium\">Escanear QR</span>\n                </button>\n                <button \n                    onClick={() => { setActiveTab('search'); reset(); }}\n                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'search' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' : 'bg-slate-800/50 text-slate-400 hover:bg-slate-800'}`}\n                >\n                    <Search size={20} />\n                    <span className=\"font-medium\">Buscar Talento</span>\n                </button>\n                <button \n                    onClick={() => { setActiveTab('cv-validation'); reset(); }}\n                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'cv-validation' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' : 'bg-slate-800/50 text-slate-400 hover:bg-slate-800'}`}\n                >\n                    <FileText size={20} />\n                    <span className=\"font-medium\">Validar CV Externo</span>\n                </button>\n            </div>\n\n            {/* Main Content */}\n            <div className=\"md:col-span-3\">\n                <div className=\"glass-panel p-8 min-h-[500px] relative overflow-hidden\">\n                    <AnimatePresence mode=\"wait\">\n                        {activeTab === 'scan' && (\n                            <motion.div \n                                key=\"scan\"\n                                initial={{ opacity: 0, y: 10 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                exit={{ opacity: 0, y: -10 }}\n                                className=\"h-full flex flex-col items-center\"\n                            >\n                                <h2 className=\"text-xl font-bold mb-6\">Esc√°ner de Credenciales</h2>\n                                {!scanResult && bulkResults.length === 0 ? (\n                                    <div className=\"w-full max-w-md bg-black rounded-2xl overflow-hidden shadow-2xl border border-slate-700 relative group\">\n                                        <div id=\"reader\" className=\"w-full h-[300px] bg-slate-900 flex items-center justify-center\">\n                                            {!isScanning && (\n                                                <div className=\"text-slate-500 flex flex-col items-center gap-4\">\n                                                    <Camera size={48} className=\"opacity-50\" />\n                                                    <p>C√°mara inactiva</p>\n                                                </div>\n                                            )}\n                                        </div>\n                                        \n                                        {/* Scanner Overlay */}\n                                        <div className=\"absolute inset-0 pointer-events-none border-[20px] border-slate-900/50 rounded-2xl z-10\">\n                                            <div className=\"w-full h-full border-2 border-blue-500/50 rounded-lg relative overflow-hidden\">\n                                                <div className=\"absolute top-0 left-0 w-full h-1 bg-blue-500 shadow-[0_0_20px_rgba(59,130,246,1)] animate-scan-line\"></div>\n                                            </div>\n                                        </div>\n\n                                        {/* Controls */}\n                                        <div className=\"absolute bottom-6 left-0 right-0 flex justify-center gap-4 z-20 px-4\">\n                                            <button \n                                                onClick={startScanner}\n                                                className=\"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg shadow-blue-900/50 flex items-center gap-2 transition-all\"\n                                            >\n                                                <Camera size={18} />\n                                                <span>Iniciar C√°mara</span>\n                                            </button>\n                                            <label className=\"bg-slate-800 hover:bg-slate-700 text-white px-4 py-2 rounded-lg font-bold shadow-lg border border-slate-600 cursor-pointer flex items-center gap-2 transition-all\">\n                                                <Upload size={18} />\n                                                <span>Subir (Masivo)</span>\n                                                <input \n                                                    type=\"file\" \n                                                    accept=\"image/*\" \n                                                    multiple\n                                                    className=\"hidden\"\n                                                    onChange={handleBulkScan}\n                                                />\n                                            </label>\n                                        </div>\n                                    </div>\n                                ) : bulkResults.length > 0 ? (\n                                    <div className=\"w-full max-w-4xl\">\n                                        <div className=\"flex justify-between items-center mb-6\">\n                                            <h3 className=\"text-xl font-bold\">Resultados del Escaneo Masivo</h3>\n                                            <button onClick={reset} className=\"btn-secondary text-sm\">\n                                                Escanear otros\n                                            </button>\n                                        </div>\n                                        <div className=\"grid md:grid-cols-2 gap-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar\">\n                                            {bulkResults.map((res) => (\n                                                <div key={res.id} className={`p-4 rounded-xl border ${res.status === 'success' ? 'bg-slate-900/50 border-slate-700' : 'bg-red-900/10 border-red-900/30'}`}>\n                                                    <div className=\"flex justify-between items-start mb-2\">\n                                                        <div className=\"flex items-center gap-2\">\n                                                            <FileText size={16} className=\"text-slate-400\" />\n                                                            <span className=\"text-sm font-medium text-slate-300 truncate max-w-[150px]\" title={res.fileName}>{res.fileName}</span>\n                                                        </div>\n                                                        {res.status === 'success' ? (\n                                                            <span className=\"text-xs bg-green-500/10 text-green-400 px-2 py-0.5 rounded border border-green-500/20\">Detectado</span>\n                                                        ) : (\n                                                            <span className=\"text-xs bg-red-500/10 text-red-400 px-2 py-0.5 rounded border border-red-500/20\">Error</span>\n                                                        )}\n                                                    </div>\n                                                    \n                                                    {res.status === 'success' && res.verification ? (\n                                                        <div className=\"space-y-2\">\n                                                            <div className=\"flex items-center gap-2\">\n                                                                <div className={`w-2 h-2 rounded-full ${res.verification.valid ? 'bg-green-500' : 'bg-yellow-500'}`}></div>\n                                                                <span className=\"font-bold text-white\">{res.verification.data.title}</span>\n                                                            </div>\n                                                            <div className=\"text-xs text-slate-400 bg-black/30 p-2 rounded\">\n                                                                <p><span className=\"text-slate-500\">Estudiante:</span> {res.verification.data.student}</p>\n                                                                <p><span className=\"text-slate-500\">Emisor:</span> {res.verification.data.issuer}</p>\n                                                                {res.verification.data.tokenId && (\n                                                                    <p className=\"mt-1 font-mono text-blue-400 truncate\">ID: {res.verification.data.tokenId}</p>\n                                                                )}\n                                                            </div>\n                                                        </div>\n                                                    ) : (\n                                                        <p className=\"text-sm text-red-400\">{res.error}</p>\n                                                    )}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                ) : (\n                                    <div className=\"text-center bg-slate-900/50 p-8 rounded-2xl border border-slate-700 max-w-md w-full\">\n                                        <CheckCircle size={64} className=\"text-green-500 mx-auto mb-6\" />\n                                        <h3 className=\"text-2xl font-bold text-white mb-2\">C√≥digo Detectado</h3>\n                                        <div className=\"bg-black/30 p-4 rounded-xl border border-slate-800 mb-6 break-all font-mono text-sm text-blue-400\">\n                                            {scanResult}\n                                        </div>\n                                        <div className=\"flex gap-3 justify-center\">\n                                            <button onClick={reset} className=\"btn-secondary\">\n                                                Escanear otro\n                                            </button>\n                                            {verificationResult?.valid && (\n                                                 <button onClick={() => setVerificationResult(verificationResult)} className=\"btn-primary\">\n                                                    Ver Detalles\n                                                 </button>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n                                <p className=\"text-slate-500 text-sm mt-6 max-w-sm text-center\">\n                                    Apunta tu c√°mara al c√≥digo QR del certificado o sube una imagen para verificar su autenticidad en la blockchain.\n                                </p>\n                            </motion.div>\n                        )}\n\n                        {activeTab === 'search' && (\n                            <motion.div \n                                key=\"search\"\n                                initial={{ opacity: 0, y: 10 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                exit={{ opacity: 0, y: -10 }}\n                                className=\"h-full flex flex-col\"\n                            >\n                                <div className=\"text-center mb-8\">\n                                    <h2 className=\"text-2xl font-bold mb-2\">Buscador de Talento Verificado</h2>\n                                    <p className=\"text-slate-400\">Accede a una base de datos global de profesionales certificados.</p>\n                                </div>\n\n                                <div className=\"w-full max-w-2xl mx-auto mb-4 relative\">\n                                    <Search className=\"absolute left-4 top-3.5 text-slate-500\" size={20} />\n                                    <input \n                                        type=\"text\" \n                                        value={searchQuery}\n                                        onChange={(e) => setSearchQuery(e.target.value)}\n                                        placeholder=\"Ej: Desarrollador Solidity, Arquitecto Hedera...\" \n                                        className=\"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-lg\"\n                                    />\n                                </div>\n\n                                {/* Smart Filters */}\n                                <div className=\"w-full max-w-2xl mx-auto mb-8 flex flex-wrap gap-2 justify-center\">\n                                    {smartFilters.map(filter => (\n                                        <button\n                                            key={filter.id}\n                                            onClick={() => setActiveFilter(activeFilter === filter.id ? null : filter.id)}\n                                            className={`text-xs px-3 py-1.5 rounded-full border transition-all flex items-center gap-1.5 ${\n                                                activeFilter === filter.id \n                                                ? (filter.special ? 'bg-purple-500/20 border-purple-500 text-purple-300' : 'bg-blue-500/20 border-blue-500 text-blue-300')\n                                                : (filter.special ? 'bg-purple-900/20 border-purple-800 text-purple-400 hover:border-purple-500' : 'bg-slate-900/50 border-slate-700 text-slate-400 hover:border-slate-500')\n                                            }`}\n                                        >\n                                            <span>{filter.icon}</span>\n                                            <span>{filter.label}</span>\n                                        </button>\n                                    ))}\n                                    \n                                    {/* Upload Job Description Button */}\n                                    <label className=\"text-xs px-3 py-1.5 rounded-full border border-dashed border-slate-600 bg-slate-900/30 text-slate-400 hover:border-slate-400 hover:text-white cursor-pointer transition-all flex items-center gap-1.5\">\n                                        <Upload size={12} />\n                                        <span>Subir Cargo (PDF)</span>\n                                        <input type=\"file\" accept=\".pdf\" className=\"hidden\" onChange={handleJobDescriptionUpload} />\n                                    </label>\n                                </div>\n\n                                <div className=\"grid md:grid-cols-2 gap-4 overflow-y-auto max-h-[600px] pr-2 custom-scrollbar\">\n                                    {mockTalents.filter(t => {\n                                        const matchesSearch = t.role.toLowerCase().includes(searchQuery.toLowerCase()) || t.skills.some(s => s.toLowerCase().includes(searchQuery.toLowerCase()));\n                                        \n                                        if (!activeFilter) return matchesSearch;\n\n                                        // Apply filters\n                                        if (activeFilter === 'smart-match') {\n                                            // Simulate AI matching: return top 2 candidates\n                                            return t.id === 1 || t.id === 3; \n                                        }\n                                        if (activeFilter === 'verified') return matchesSearch && t.verified;\n                                        if (activeFilter === 'solidity') return matchesSearch && t.skills.some(s => s.toLowerCase().includes('solidity'));\n                                        if (activeFilter === 'security') return matchesSearch && (t.skills.some(s => s.toLowerCase().includes('security')) || t.role.toLowerCase().includes('auditor'));\n                                        if (activeFilter === 'defi') return matchesSearch && t.skills.some(s => s.toLowerCase().includes('defi'));\n                                        if (activeFilter === 'react') return matchesSearch && (t.skills.some(s => s.toLowerCase().includes('react')) || t.role.toLowerCase().includes('frontend'));\n                                        \n                                        return matchesSearch;\n                                    }).map(talent => (\n                                        <div key={talent.id} className=\"bg-slate-950/50 border border-slate-800 rounded-xl p-5 hover:border-blue-500/30 transition-all group relative overflow-hidden\">\n                                            {/* Network Badge Background */}\n                                            <div className=\"absolute top-0 right-0 p-2 opacity-5 pointer-events-none\">\n                                                 <img src=\"https://cryptologos.cc/logos/hedera-hashgraph-hbar-logo.png?v=026\" className=\"w-24 h-24 grayscale\" />\n                                            </div>\n\n                                            <div className=\"flex justify-between items-start mb-3 relative z-10\">\n                                                <div className=\"flex items-center gap-3\">\n                                                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center font-bold text-slate-400 border border-slate-600 relative group/avatar cursor-help\">\n                                                        {talent.name.charAt(0)}\n                                                        \n                                                        {/* Hover Trajectory Popup */}\n                                                        <div className=\"absolute left-12 top-0 bg-slate-900 border border-slate-700 rounded-lg p-3 w-64 shadow-xl opacity-0 group-hover/avatar:opacity-100 transition-opacity pointer-events-none z-50\">\n                                                            <h4 className=\"text-xs font-bold text-slate-300 mb-2 border-b border-slate-800 pb-1\">Trayectoria Verificada</h4>\n                                                            <div className=\"space-y-2\">\n                                                                <div className=\"flex items-center justify-between text-[10px]\">\n                                                                    <span className=\"text-white\">Master en Blockchain</span>\n                                                                    <span className=\"text-slate-500\">2023</span>\n                                                                </div>\n                                                                <div className=\"flex items-center justify-between text-[10px]\">\n                                                                    <span className=\"text-white\">Solidity Advanced</span>\n                                                                    <span className=\"text-slate-500\">2022</span>\n                                                                </div>\n                                                                <div className=\"flex items-center justify-between text-[10px]\">\n                                                                    <span className=\"text-white\">React Certification</span>\n                                                                    <span className=\"text-slate-500\">2021</span>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    <div>\n                                                        <h3 className=\"font-bold text-white group-hover:text-blue-400 transition-colors flex items-center gap-2\">\n                                                            {talent.name}\n                                                            {talent.verified && (\n                                                                <div className=\"flex items-center gap-1 bg-green-500/10 text-green-400 px-1.5 py-0.5 rounded text-[10px] border border-green-500/20\" title=\"Identidad Verificada\">\n                                                                    <Shield size={10} />\n                                                                    <span className=\"font-bold\">VERIFICADO</span>\n                                                                </div>\n                                                            )}\n                                                        </h3>\n                                                        <p className=\"text-xs text-slate-400 flex items-center gap-1\">\n                                                            <MapPin size={10} /> {talent.location}\n                                                        </p>\n                                                    </div>\n                                                </div>\n                                                \n                                                {/* Blockchain Network Badge */}\n                                                <div className=\"flex flex-col items-end gap-1\">\n                                                    <div className=\"bg-slate-900 border border-slate-700 px-2 py-1 rounded text-[10px] flex items-center gap-1.5 text-slate-300\">\n                                                        {talent.network === 'Hedera' && <img alt=\"Hedera\" src=\"https://cryptologos.cc/logos/hedera-hashgraph-hbar-logo.png?v=026\" className=\"w-3 h-3\" />}\n                                                        {talent.network === 'Ethereum' && <img alt=\"Ethereum\" src=\"https://cryptologos.cc/logos/ethereum-eth-logo.png?v=026\" className=\"w-3 h-3\" />}\n                                                        {talent.network === 'Algorand' && <img alt=\"Algorand\" src=\"https://cryptologos.cc/logos/algorand-algo-logo.png?v=026\" className=\"w-3 h-3\" />}\n                                                        <span>{talent.network}</span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            \n                                            <div className=\"mb-4 relative z-10\">\n                                                <p className=\"text-sm text-slate-300 font-medium mb-2\">{talent.role}</p>\n                                                <div className=\"flex flex-wrap gap-2\">\n                                                    {talent.skills.map(skill => (\n                                                        <span key={skill} className=\"text-[10px] bg-slate-900 text-slate-400 border border-slate-800 px-2 py-1 rounded-full\">\n                                                            {skill}\n                                                        </span>\n                                                    ))}\n                                                </div>\n                                            </div>\n\n                                            <div className=\"flex items-center justify-between mt-4 pt-3 border-t border-slate-800 relative z-10\">\n                                                <button onClick={handleContact} className=\"text-sm font-medium text-white hover:text-blue-400 transition-colors\">\n                                                    Contactar\n                                                </button>\n                                                \n                                                <div className=\"flex items-center gap-3\">\n                                                     {/* Math Proof Button */}\n                                                     <a \n                                                         href={talent.txLink}\n                                                         target=\"_blank\"\n                                                         rel=\"noopener noreferrer\"\n                                                         className=\"text-[10px] flex items-center gap-1 text-slate-500 hover:text-blue-400 transition-colors\"\n                                                         title=\"Ver prueba matem√°tica en Blockchain\"\n                                                     >\n                                                         <Lock size={10} />\n                                                         <span>Verificar en Ledger</span>\n                                                     </a>\n\n                                                    <button onClick={handleContact} className=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center hover:bg-blue-500 transition-colors shadow-lg shadow-blue-900/30\">\n                                                        <Search size={14} className=\"text-white\" />\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </motion.div>\n                        )}\n\n                        {activeTab === 'cv-validation' && (\n                            <motion.div \n                                key=\"cv-validation\"\n                                initial={{ opacity: 0, y: 10 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                exit={{ opacity: 0, y: -10 }}\n                                className=\"h-full flex flex-col items-center\"\n                            >\n                                <div className=\"flex justify-between items-center w-full max-w-5xl mb-6\">\n                                    <h2 className=\"text-xl font-bold\">Validaci√≥n Masiva de CVs</h2>\n                                    {cvValidationResults.length > 0 && (\n                                        <div className=\"flex gap-3\">\n                                            <button \n                                                onClick={handleDownloadReport} \n                                                disabled={generatingReport || cvValidationResults.some(r => r.status === 'processing')}\n                                                className=\"btn-primary flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed\"\n                                            >\n                                                <FileText size={16} />\n                                                {generatingReport ? 'Generando PDF...' : 'Descargar Reporte'}\n                                            </button>\n                                            <button onClick={() => {setCvFiles([]); setCvValidationResults([]);}} className=\"btn-secondary text-sm\">\n                                                Validar nuevo lote\n                                            </button>\n                                        </div>\n                                    )}\n                                </div>\n                                \n                                {cvValidationResults.length === 0 ? (\n                                    <div className=\"w-full max-w-xl bg-slate-900/50 border border-dashed border-slate-700 rounded-2xl p-10 flex flex-col items-center justify-center gap-4 text-center hover:border-blue-500/50 transition-colors\">\n                                        <div className=\"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center text-blue-400\">\n                                            <Upload size={32} />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"font-bold text-lg mb-1\">Carga Masiva de CVs</h3>\n                                            <p className=\"text-slate-400 text-sm\">Arrastra m√∫ltiples archivos PDF. <br/>El sistema analizar√° identidad y certificaciones en lote.</p>\n                                        </div>\n                                        <label className=\"btn-primary cursor-pointer flex items-center gap-2 mt-2\">\n                                            <span>Seleccionar Archivos</span>\n                                            <input type=\"file\" accept=\".pdf\" multiple className=\"hidden\" onChange={handleCvValidation} />\n                                        </label>\n                                    </div>\n                                ) : (\n                                    <div className=\"w-full max-w-5xl grid md:grid-cols-2 lg:grid-cols-2 gap-6 overflow-y-auto max-h-[600px] pr-2 custom-scrollbar\">\n                                        {cvValidationResults.map((result) => (\n                                            <motion.div \n                                                key={result.id}\n                                                initial={{ opacity: 0, scale: 0.95 }}\n                                                animate={{ opacity: 1, scale: 1 }}\n                                                className={`bg-slate-950 border rounded-xl p-5 relative overflow-hidden transition-all ${\n                                                    result.status === 'processing' ? 'border-blue-500/30' : 'border-green-500/30'\n                                                }`}\n                                            >\n                                                {/* Status Badge */}\n                                                <div className=\"absolute top-4 right-4\">\n                                                    {result.status === 'processing' ? (\n                                                        <span className=\"flex items-center gap-1.5 text-xs font-bold text-blue-400 bg-blue-500/10 px-2 py-1 rounded-full border border-blue-500/20\">\n                                                            <div className=\"w-2 h-2 rounded-full bg-blue-400 animate-pulse\"></div>\n                                                            ANALIZANDO\n                                                        </span>\n                                                    ) : (\n                                                        <span className=\"flex items-center gap-1.5 text-xs font-bold text-green-400 bg-green-500/10 px-2 py-1 rounded-full border border-green-500/20\">\n                                                            <CheckCircle size={12} />\n                                                            VERIFICADO\n                                                        </span>\n                                                    )}\n                                                </div>\n\n                                                {/* Header */}\n                                                <div className=\"flex items-center gap-3 mb-4\">\n                                                    <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${\n                                                        result.status === 'processing' ? 'bg-slate-900 text-slate-500' : 'bg-gradient-to-br from-green-500/20 to-emerald-900/20 text-green-400'\n                                                    }`}>\n                                                        <FileText size={24} />\n                                                    </div>\n                                                    <div>\n                                                        <h4 className=\"font-bold text-sm text-slate-200 truncate max-w-[200px]\">{result.fileName}</h4>\n                                                        <p className=\"text-xs text-slate-500\">{(result.size / 1024 / 1024).toFixed(2)} MB</p>\n                                                    </div>\n                                                </div>\n\n                                                {/* Content */}\n                                                {result.status === 'valid' && (\n                                                    <div className=\"space-y-4\">\n                                                        <div className=\"flex items-center justify-between bg-slate-900/50 p-3 rounded-lg border border-slate-800\">\n                                                            <div>\n                                                                <p className=\"text-xs text-slate-500 uppercase font-bold\">Candidato</p>\n                                                                <p className=\"font-bold text-white\">{result.candidateName}</p>\n                                                            </div>\n                                                            <div className=\"text-right\">\n                                                                <p className=\"text-xs text-slate-500 uppercase font-bold\">Match</p>\n                                                                <p className=\"font-bold text-green-400 text-lg\">{result.matchScore}%</p>\n                                                            </div>\n                                                        </div>\n                                                        \n                                                        <div>\n                                                            <p className=\"text-xs text-slate-500 mb-2 flex items-center gap-1\">\n                                                                <Shield size={10} /> Skills Certificadas\n                                                            </p>\n                                                            <div className=\"flex flex-wrap gap-1.5\">\n                                                                {result.verifiedSkills.map(skill => (\n                                                                    <span key={skill} className=\"bg-slate-800 text-slate-300 text-[10px] px-2 py-1 rounded border border-slate-700\">\n                                                                        {skill}\n                                                                    </span>\n                                                                ))}\n                                                            </div>\n                                                        </div>\n\n                                                        <div className=\"pt-3 border-t border-slate-800 flex items-center justify-between\">\n                                                            <div className=\"flex items-center gap-1 text-[10px] text-slate-500\">\n                                                                <Lock size={10} />\n                                                                <span className=\"font-mono\">{result.blockchainProof.substr(0, 12)}...</span>\n                                                            </div>\n                                                            <button className=\"text-xs text-blue-400 hover:text-blue-300 font-bold transition-colors\">\n                                                                Ver Detalles\n                                                            </button>\n                                                        </div>\n                                                    </div>\n                                                )}\n                                                \n                                                {result.status === 'processing' && (\n                                                    <div className=\"space-y-3 py-4\">\n                                                        <div className=\"h-2 bg-slate-800 rounded-full overflow-hidden\">\n                                                            <div className=\"h-full bg-blue-500 w-2/3 animate-[shimmer_1s_infinite]\"></div>\n                                                        </div>\n                                                        <p className=\"text-xs text-center text-slate-500 animate-pulse\">Buscando identidad en blockchain...</p>\n                                                    </div>\n                                                )}\n                                            </motion.div>\n                                        ))}\n                                    </div>\n                                )}\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n\n                    {/* Result Card (Shared) */}\n                    {verificationResult && (\n                        <motion.div \n                            initial={{ opacity: 0, scale: 0.9 }}\n                            animate={{ opacity: 1, scale: 1 }}\n                            className={`absolute inset-0 bg-slate-900/95 z-10 flex items-center justify-center p-6 backdrop-blur-sm`}\n                        >\n                            <div className=\"w-full max-w-lg bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl\">\n                                <div className=\"flex justify-between items-start mb-6\">\n                                    <div className=\"flex items-center gap-3\">\n                                        {verificationResult.valid ? (\n                                            <div className=\"bg-green-500/20 p-2 rounded-full\">\n                                                <Shield size={24} className=\"text-green-500\" />\n                                            </div>\n                                        ) : (\n                                            <div className=\"bg-red-500/20 p-2 rounded-full\">\n                                                <XCircle size={24} className=\"text-red-500\" />\n                                            </div>\n                                        )}\n                                        <div>\n                                            <h3 className=\"text-xl font-bold text-white\">\n                                                {verificationResult.valid ? 'Verificado Exitosamente' : 'Verificaci√≥n Fallida'}\n                                            </h3>\n                                            <p className=\"text-sm text-slate-400\">Resultados del an√°lisis Triple Shield</p>\n                                        </div>\n                                    </div>\n                                    <button onClick={reset} className=\"text-slate-400 hover:text-white\">‚úï</button>\n                                </div>\n\n                                {verificationResult.valid ? (\n                                    <div className=\"space-y-4\">\n                                        <div className=\"bg-slate-950 rounded-xl p-4 border border-slate-800\">\n                                            <div className=\"text-sm text-slate-500 mb-1\">Nombre</div>\n                                            <div className=\"font-medium text-lg text-white\">{verificationResult.name || verificationResult.data?.student}</div>\n                                        </div>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div className=\"bg-slate-950 rounded-xl p-4 border border-slate-800\">\n                                                <div className=\"text-sm text-slate-500 mb-1\">Confianza IA</div>\n                                                <div className=\"font-mono text-green-400\">{verificationResult.confidence || '100%'}</div>\n                                            </div>\n                                            <div className=\"bg-slate-950 rounded-xl p-4 border border-slate-800\">\n                                                <div className=\"text-sm text-slate-500 mb-1\">Estado</div>\n                                                <div className=\"text-blue-400 flex items-center gap-1\">\n                                                    <CheckCircle size={14} /> {verificationResult.status || 'Confirmado'}\n                                                </div>\n                                            </div>\n                                        </div>\n                                        {verificationResult.credentials && (\n                                            <div>\n                                                <div className=\"text-sm text-slate-500 mb-2\">Credenciales Encontradas</div>\n                                                <div className=\"flex flex-wrap gap-2\">\n                                                    {verificationResult.credentials.map((cred, i) => (\n                                                        <span key={i} className=\"px-3 py-1 rounded-full bg-blue-900/30 text-blue-300 text-xs border border-blue-500/30\">\n                                                            {cred}\n                                                        </span>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                ) : (\n                                    <div className=\"bg-red-900/10 border border-red-900/30 rounded-xl p-4 text-red-200\">\n                                        {verificationResult.message}\n                                    </div>\n                                )}\n                                \n                                <button onClick={reset} className=\"w-full mt-6 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-medium transition-colors\">\n                                    Nueva Verificaci√≥n\n                                </button>\n                            </div>\n                        </motion.div>\n                    )}\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EmployerDashboard;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\EmployerLanding.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\EnhancedInstitutionDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'ConnectionService' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'demoService' is defined but never used.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'useHedera' is defined but never used.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'issuanceService' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'getGateways' is defined but never used.","line":11,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'Hexagon' is defined but never used.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'theme' is defined but never used.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'jsPDF' is defined but never used.","line":15,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":54,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'setConnectionStatus' is assigned a value but never used.","line":58,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":47},{"ruleId":"no-unused-vars","severity":1,"message":"'setAclBalance' is assigned a value but never used.","line":59,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ConnectionService from './services/connectionService';\r\nimport IssueTitleForm from './IssueTitleForm';\r\nimport BatchIssuance from './BatchIssuance';\r\nimport demoService from './services/demoService';\r\nimport useHedera from './useHedera';\r\nimport { useAuth } from './useAuth';\r\nimport { issuanceService } from './services/issuanceService';\r\nimport { institutionService } from './services/institutionService';\r\nimport { toGateway, getGateways } from './utils/ipfsUtils';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Hexagon } from 'lucide-react';\r\nimport { theme } from './themeConfig';\r\nimport jsPDF from 'jspdf';\r\nimport CreditRecharge from './CreditRecharge';\r\nimport CertificateDesigner from './CertificateDesigner';\r\nimport NarrativeTemplateManager from './NarrativeTemplateManager';\r\nimport { Toaster, toast } from 'react-hot-toast';\r\nimport CyberBackground from './CyberBackground';\r\nimport InstitutionAnalytics from './InstitutionAnalytics';\r\nimport InstitutionSubscriptionModal from './InstitutionSubscriptionModal';\r\nimport n8nService from './services/n8nService';\r\n\r\n// Plan Definitions\r\nconst PLANS = {\r\n  esencial: {\r\n    id: 'esencial',\r\n    name: 'Plan Esencial',\r\n    limit: 50,\r\n    networks: ['hedera'],\r\n    analytics: 'basic',\r\n    price: 50\r\n  },\r\n  professional: {\r\n    id: 'professional',\r\n    name: 'Plan Profesional',\r\n    limit: 220,\r\n    networks: ['hedera', 'xrp'],\r\n    analytics: 'advanced',\r\n    price: 155\r\n  },\r\n  enterprise: {\r\n    id: 'enterprise',\r\n    name: 'Plan Enterprise',\r\n    limit: Infinity,\r\n    networks: ['hedera', 'xrp', 'algorand'],\r\n    analytics: 'advanced',\r\n    price: 'custom'\r\n  }\r\n};\r\n\r\nfunction EnhancedInstitutionDashboard({ demo = false }) {\r\n  const { token, user } = useAuth();\r\n  const [loading, setLoading] = useState(true);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('emitir'); // 'emitir' | 'masiva' | 'credenciales' | 'designer' | 'recargar'\r\n  const [connectionStatus, setConnectionStatus] = useState('connected');\r\n  const [aclBalance, setAclBalance] = useState(5000);\r\n  \r\n  // Branding State\r\n  const [institutionName, setInstitutionName] = useState('Mi Universidad');\r\n  const [institutionLogo, setInstitutionLogo] = useState('');\r\n  const [isEditingName, setIsEditingName] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const savedName = localStorage.getItem('acl:brand:name');\r\n    const savedLogo = localStorage.getItem('acl:brand:logo');\r\n    if (savedName) setInstitutionName(savedName);\r\n    if (savedLogo) setInstitutionLogo(savedLogo);\r\n  }, []);\r\n\r\n  const handleLogoUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setInstitutionLogo(reader.result);\r\n        localStorage.setItem('acl:brand:logo', reader.result);\r\n        toast.success('Logo actualizado');\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleNameSave = () => {\r\n    setIsEditingName(false);\r\n    localStorage.setItem('acl:brand:name', institutionName);\r\n    toast.success('Nombre actualizado');\r\n  };\r\n\r\n  \r\n  // Plan State\r\n  const [currentPlan, setCurrentPlan] = useState(PLANS.esencial); // Default to Esencial as per user request\r\n  const [showPlanModal, setShowPlanModal] = useState(false);\r\n  const [emissionsUsed, setEmissionsUsed] = useState(0);\r\n  const [selectedNetworks, setSelectedNetworks] = useState(PLANS.professional.networks);\r\n\r\n  useEffect(() => {\r\n    if (currentPlan) {\r\n        setSelectedNetworks(currentPlan.networks);\r\n    }\r\n  }, [currentPlan]);\r\n\r\n\r\n\r\n  const [stats, setStats] = useState({\r\n    totalCredentials: 0,\r\n    totalTokens: 0,\r\n    totalRecipients: 0\r\n  });\r\n  const [credentials, setCredentials] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Fetch Plan Details\r\n        const planData = await n8nService.getInstitutionPlan('inst-123');\r\n        setCurrentPlan(planData.details);\r\n        setEmissionsUsed(planData.emissionsUsed);\r\n        setSelectedNetworks(planData.details.networks);\r\n\r\n        // Intentar cargar datos reales si hay token\r\n        if (token && !demo) {\r\n             try {\r\n                 const creds = await institutionService.getIssuedCredentials(token);\r\n                 setCredentials(creds || []);\r\n                 setStats({\r\n                    totalCredentials: creds.length,\r\n                    totalTokens: new Set(creds.map(c => c.tokenId)).size,\r\n                    totalRecipients: new Set(creds.map(c => c.studentId)).size\r\n                 });\r\n             } catch (err) {\r\n                 console.warn(\"Could not fetch real data, using fallback\", err);\r\n                 // Fallback mock data to prevent empty dashboard\r\n                 setCredentials([\r\n                    { studentName: 'Estudiante Demo', title: 'Certificado de Prueba', id: '0.0.12345', status: 'confirmed' }\r\n                 ]);\r\n             }\r\n        } else {\r\n            // Mock data for demo mode\r\n            await new Promise(r => setTimeout(r, 800)); // Simulate network\r\n            setStats({ totalCredentials: 1240, totalTokens: 3, totalRecipients: 850 });\r\n            setCredentials([\r\n                { studentName: 'Ana Garc√≠a', title: 'Ingenier√≠a de Software', id: '0.0.123456', status: 'confirmed' },\r\n                { studentName: 'Carlos L√≥pez', title: 'Arquitectura', id: '0.0.789012', status: 'confirmed' },\r\n                { studentName: 'Maria Rodriguez', title: 'Master en Data Science', id: '0.0.456789', status: 'confirmed' }\r\n            ]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Dashboard error:\", error);\r\n        toast.error(\"Error cargando el dashboard\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [token, demo]);\r\n\r\n  const handleSubscribe = async (planId) => {\r\n    toast.loading(\"Actualizando plan institucional...\");\r\n    try {\r\n        const result = await n8nService.upgradePlan(planId);\r\n        if (result.success) {\r\n            setCurrentPlan(result.plan);\r\n            setSelectedNetworks(result.plan.networks);\r\n            setShowPlanModal(false);\r\n            toast.dismiss();\r\n            toast.success(`¬°Plan actualizado a ${result.plan.name}!`);\r\n        }\r\n    } catch (error) {\r\n        toast.error(\"Error al actualizar plan\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Simulate High Demand Notification\r\n    if (!demo && !loading) {\r\n        const timer = setTimeout(() => {\r\n            toast((t) => (\r\n                <div className=\"flex items-start gap-3 max-w-sm\">\r\n                    <div className=\"bg-orange-500/20 p-2 rounded-lg text-orange-400\">\r\n                        <span className=\"text-xl\">üî•</span>\r\n                    </div>\r\n                    <div>\r\n                        <h4 className=\"font-bold text-white text-sm\">Alta Demanda Detectada</h4>\r\n                        <p className=\"text-xs text-slate-300 mt-1\">\r\n                            Anglo American ha validado 50 certificados de \"Seguridad Minera\" en la √∫ltima hora.\r\n                        </p>\r\n                        <button \r\n                            onClick={() => { setActiveTab('analiticas'); toast.dismiss(t.id); }}\r\n                            className=\"mt-2 text-xs font-bold text-orange-400 hover:text-orange-300\"\r\n                        >\r\n                            Ver An√°lisis de Mercado ‚Üí\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            ), { duration: 8000, style: { border: '1px solid rgba(249, 115, 22, 0.3)', background: 'rgba(15, 23, 42, 0.95)' } });\r\n        }, 5000);\r\n        return () => clearTimeout(timer);\r\n    }\r\n  }, [loading, demo]);\r\n\r\n  const renderConnectionStatus = () => (\r\n    <div className=\"flex items-center gap-2 mt-1\">\r\n      <div className={`h-2 w-2 rounded-full ${connectionStatus === 'connected' ? 'bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]' : 'bg-red-500'}`}></div>\r\n      <span className=\"text-xs text-slate-400 font-mono tracking-wider uppercase\">{connectionStatus}</span>\r\n    </div>\r\n  );\r\n\r\n  const renderLimitBanner = () => {\r\n    if (currentPlan?.limit !== Infinity && emissionsUsed >= currentPlan?.limit) {\r\n      return (\r\n        <div className=\"bg-red-900/20 border border-red-500/50 rounded-lg p-4 mb-6 flex items-center justify-between animate-pulse\">\r\n          <div className=\"flex items-center gap-3\">\r\n             <div className=\"p-2 bg-red-500/20 rounded-full text-red-400\">\r\n                <span className=\"text-xl\">üõë</span>\r\n             </div>\r\n             <div>\r\n                <h4 className=\"text-white font-bold\">L√≠mite de Emisiones Alcanzado</h4>\r\n                <p className=\"text-slate-400 text-sm\">Has alcanzado el l√≠mite de {currentPlan.limit} t√≠tulos de tu Plan {currentPlan.name}.</p>\r\n             </div>\r\n          </div>\r\n          <button \r\n             onClick={() => setShowPlanModal(true)}\r\n             className=\"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white font-bold rounded-lg shadow-lg\"\r\n          >\r\n             Mejorar a Profesional ‚ö°\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const renderContent = () => {\r\n    switch (activeTab) {\r\n      case 'masiva':\r\n        return (\r\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"glass-panel p-6\">\r\n            {renderLimitBanner()}\r\n            <h2 className=\"text-2xl font-bold mb-6 text-white flex items-center gap-2\">\r\n              <span className=\"text-cyan-400\">üìö</span> Emisi√≥n Masiva\r\n              <span className={`text-xs px-2 py-1 rounded-full border ${currentPlan?.limit === Infinity ? 'border-pink-500 text-pink-400' : 'border-slate-500 text-slate-400'}`}>\r\n                {currentPlan?.limit === Infinity ? 'Ilimitado' : `${emissionsUsed} / ${currentPlan?.limit} T√≠tulos`}\r\n              </span>\r\n            </h2>\r\n            <BatchIssuance demo={demo} plan={currentPlan} />\r\n          </motion.div>\r\n        );\r\n      case 'designer':\r\n        return (\r\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\r\n             <CertificateDesigner \r\n                onClose={() => setActiveTab('emitir')} \r\n                onSave={() => { toast.success('Dise√±o guardado'); setActiveTab('emitir'); }} \r\n                onNavigate={(tab) => setActiveTab(tab)}\r\n             />\r\n          </motion.div>\r\n        );\r\n      case 'narrativas':\r\n        return (\r\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"h-[calc(100vh-140px)]\">\r\n            <NarrativeTemplateManager />\r\n          </motion.div>\r\n        );\r\n      case 'analiticas':\r\n        return (\r\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\r\n                <InstitutionAnalytics plan={currentPlan} onUpgrade={() => setShowPlanModal(true)} />\r\n            </motion.div>\r\n        );\r\n      case 'recargar':\r\n        return (\r\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\r\n            <CreditRecharge />\r\n          </motion.div>\r\n        );\r\n      case 'credenciales':\r\n        return (\r\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"glass-panel overflow-hidden\">\r\n            <div className=\"p-6 border-b border-slate-700/50 flex justify-between items-center\">\r\n              <h3 className=\"font-bold text-xl text-white\">Historial Completo de Emisiones</h3>\r\n              <div className=\"flex gap-2\">\r\n                <button className=\"btn-ghost text-xs\">Exportar CSV</button>\r\n                <button className=\"btn-primary text-xs\" onClick={() => setActiveTab('emitir')}>Nueva Emisi√≥n</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full text-sm text-left\">\r\n                <thead className=\"bg-white/5 text-slate-400\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-4\">Estudiante</th>\r\n                    <th className=\"px-6 py-4\">T√≠tulo</th>\r\n                    <th className=\"px-6 py-4\">ID Transacci√≥n</th>\r\n                    <th className=\"px-6 py-4\">Fecha</th>\r\n                    <th className=\"px-6 py-4\">Estado</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-slate-800\">\r\n                  {credentials.map((cred, idx) => (\r\n                    <tr key={idx} className=\"hover:bg-white/5 transition-colors\">\r\n                      <td className=\"px-6 py-4 font-medium text-white\">{cred.studentName || 'Anon'}</td>\r\n                      <td className=\"px-6 py-4 text-slate-300\">{cred.title}</td>\r\n                      <td className=\"px-6 py-4 font-mono text-xs text-slate-500\">{cred.id || 'N/A'}</td>\r\n                      <td className=\"px-6 py-4 text-slate-400\">{cred.createdAt ? new Date(cred.createdAt).toLocaleDateString() : 'Hoy'}</td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs border ${cred.status === 'pending' ? 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30' : 'bg-green-500/20 text-green-400 border-green-500/30'}`}>\r\n                          {cred.status === 'pending' ? 'Pendiente' : 'Confirmado'}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                  {credentials.length === 0 && (\r\n                    <tr>\r\n                      <td colSpan=\"5\" className=\"px-6 py-12 text-center text-slate-500\">\r\n                        No hay credenciales emitidas a√∫n.\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </motion.div>\r\n        );\r\n      case 'emitir':\r\n      default:\r\n        return (\r\n          <>\r\n            {renderLimitBanner()}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n              {/* Left Column: Form */}\r\n              <div>\r\n                <div className=\"glass-panel p-1 rounded-xl\">\r\n                  <IssueTitleForm \r\n                    demo={demo || connectionStatus === 'demo'} \r\n                    networks={selectedNetworks} \r\n                    plan={currentPlan}\r\n                    emissionsUsed={emissionsUsed}\r\n                    onEmissionComplete={(count) => setEmissionsUsed(prev => prev + count)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Right Column: Quick Actions & Batch */}\r\n              <div className=\"space-y-6\">\r\n                <div \r\n                  className=\"glass-card p-6 relative overflow-hidden group cursor-pointer\"\r\n                  onClick={() => setActiveTab('masiva')}\r\n                >\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n                  <div className=\"absolute -inset-0.5 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-2xl opacity-20 group-hover:opacity-40 blur transition duration-500\"></div>\r\n\r\n                  <div className=\"relative z-10\">\r\n                    <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2 text-white\">\r\n                      <span className=\"text-cyan-400 text-xl animate-pulse\">‚ö°</span>\r\n                      <span className=\"bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400\">Emisi√≥n Masiva</span>\r\n                    </h3>\r\n                    <div className=\"border-2 border-dashed border-slate-600/50 rounded-xl p-8 text-center hover:border-cyan-500/50 transition-all bg-black/40 backdrop-blur-sm group-hover:bg-black/60\">\r\n                      <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-800/50 flex items-center justify-center border border-slate-700 group-hover:border-cyan-500/50 group-hover:scale-110 transition-all duration-300\">\r\n                        <span className=\"text-3xl\">üìÑ</span>\r\n                      </div>\r\n                      <p className=\"text-slate-200 font-medium mb-1\">Arrastra PDF o Excel aqu√≠</p>\r\n                      <p className=\"text-xs text-slate-500 mb-4\">Certificaci√≥n instant√°nea en lote</p>\r\n                      <button className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white text-xs font-bold rounded-lg border border-slate-600 hover:border-cyan-500 transition-all shadow-lg hover:shadow-cyan-500/20\">\r\n                        Ir a Emisi√≥n Masiva\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div \r\n                    className=\"glass-card p-4 cursor-pointer hover:bg-white/5 transition-all group\"\r\n                    onClick={() => setActiveTab('narrativas')}\r\n                  >\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                      <div className=\"p-2 bg-purple-500/20 rounded-lg text-purple-400 group-hover:scale-110 transition-transform\">\r\n                        <span className=\"text-xl\">üìñ</span>\r\n                      </div>\r\n                      <h3 className=\"font-bold text-white text-sm\">Narrativas</h3>\r\n                    </div>\r\n                    <p className=\"text-xs text-slate-400\">Configura relatos y mensajes personalizados.</p>\r\n                  </div>\r\n\r\n                  <div \r\n                    className=\"glass-card p-4 cursor-pointer hover:bg-white/5 transition-all group\"\r\n                    onClick={() => setActiveTab('designer')}\r\n                  >\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                      <div className=\"p-2 bg-pink-500/20 rounded-lg text-pink-400 group-hover:scale-110 transition-transform\">\r\n                        <span className=\"text-xl\">üé®</span>\r\n                      </div>\r\n                      <h3 className=\"font-bold text-white text-sm\">Studio</h3>\r\n                    </div>\r\n                    <p className=\"text-xs text-slate-400\">Dise√±a diplomas y certificados hologr√°ficos.</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"glass-card p-6\">\r\n                  <h3 className=\"text-lg font-bold mb-4 text-white\">Acciones R√°pidas</h3>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    <button className=\"px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded text-sm text-slate-200 border border-slate-600 transition-colors\" onClick={() => setActiveTab('designer')}>Dise√±ar Nuevo T√≠tulo</button>\r\n                    <button className=\"px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded text-sm text-slate-200 border border-slate-600 transition-colors\" onClick={() => setActiveTab('recargar')}>Recargar Saldo</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"min-h-screen flex items-center justify-center bg-[#030014]\"><div className=\"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500 shadow-neon-blue\"></div></div>;\r\n\r\n  return (\r\n    <div className=\"h-screen text-slate-100 flex overflow-hidden relative font-sans selection:bg-cyan-500/30\">\r\n      <CyberBackground />\r\n      <Toaster position=\"bottom-right\" toastOptions={{ style: { background: 'rgba(15, 23, 42, 0.9)', color: '#fff', border: '1px solid rgba(51, 65, 85, 0.5)', backdropFilter: 'blur(10px)' } }} />\r\n\r\n\r\n      {/* Sidebar */}\r\n      <motion.div\r\n        initial={{ x: -100, opacity: 0 }}\r\n        animate={{ x: 0, opacity: 1 }}\r\n        className={`fixed md:static top-0 left-0 h-full w-64 z-50 glass-panel border-r border-slate-700/50 flex flex-col flex-shrink-0 overflow-y-auto ${sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'} transition-transform duration-300`}\r\n      >\r\n        {/* AcademicChain Branding Header - Matching Global Header Style */}\r\n        <div className=\"py-4 px-6 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm\">\r\n           <div className=\"flex items-center gap-3\">\r\n              <img\r\n                src={toGateway('ipfs://bafkreicickkyjjn3ztitciypfh635lqowdskzbv54fiqbrhs4zbmwhjv4q')}\r\n                alt=\"AcademicChain Logo\"\r\n                className=\"h-10 w-10 rounded-full shadow-sm object-contain bg-white\"\r\n              />\r\n              <div className=\"flex flex-col\">\r\n                 <h3 className=\"text-lg font-bold text-slate-900 leading-none tracking-tight\">AcademicChain</h3>\r\n                 <p className=\"text-[10px] text-slate-500 font-medium mt-0.5\">Impulsado por AcademicChain</p>\r\n              </div>\r\n           </div>\r\n        </div>\r\n\r\n        <div className=\"p-6 border-b border-slate-700/50\">\r\n          {/* Institution Branding */}\r\n          <div className=\"flex flex-col items-center mb-6\">\r\n            <div className=\"relative group w-24 h-24 mb-3\">\r\n              <div className=\"w-24 h-24 rounded-full bg-slate-800 border-2 border-slate-600 flex items-center justify-center overflow-hidden shadow-lg shadow-cyan-500/10\">\r\n                {institutionLogo ? (\r\n                  <img src={institutionLogo} alt=\"Logo\" className=\"w-full h-full object-cover\" />\r\n                ) : (\r\n                  <span className=\"text-4xl\">üèõÔ∏è</span>\r\n                )}\r\n              </div>\r\n              <label className=\"absolute inset-0 flex items-center justify-center bg-black/60 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer\">\r\n                <span className=\"text-xs font-bold text-white\">Cambiar</span>\r\n                <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleLogoUpload} />\r\n              </label>\r\n            </div>\r\n            \r\n            {isEditingName ? (\r\n              <input\r\n                type=\"text\"\r\n                value={institutionName}\r\n                onChange={(e) => setInstitutionName(e.target.value)}\r\n                onBlur={handleNameSave}\r\n                onKeyDown={(e) => e.key === 'Enter' && handleNameSave()}\r\n                className=\"bg-slate-800 border border-slate-600 text-white text-center rounded px-2 py-1 w-full text-sm font-bold focus:border-cyan-500 outline-none\"\r\n                autoFocus\r\n              />\r\n            ) : (\r\n              <div \r\n                className=\"group flex items-center gap-2 cursor-pointer\"\r\n                onClick={() => setIsEditingName(true)}\r\n              >\r\n                <h2 className=\"text-lg font-bold text-white group-hover:text-cyan-400 transition-colors\">{institutionName}</h2>\r\n                <span className=\"text-xs text-slate-500 opacity-0 group-hover:opacity-100 transition-opacity\">‚úèÔ∏è</span>\r\n              </div>\r\n            )}\r\n            <p className=\"text-xs text-slate-400 mt-1\">Instituci√≥n Verificada</p>\r\n          </div>\r\n\r\n          {/* Plan Info */}\r\n          <div className=\"flex items-center justify-between bg-slate-900/50 p-2 rounded-lg border border-slate-800/50 cursor-pointer hover:border-slate-700 transition-colors\" onClick={() => setShowPlanModal(true)}>\r\n             <div className=\"flex items-center gap-2\">\r\n                <span className={`w-2 h-2 rounded-full ${currentPlan?.id === 'enterprise' ? 'bg-pink-500 animate-pulse' : 'bg-blue-500'}`}></span>\r\n                <p className=\"text-xs text-slate-300 font-bold uppercase\">{currentPlan?.name || 'Cargando...'}</p>\r\n             </div>\r\n             <span className=\"text-[10px] text-cyan-400 hover:underline\">Gestionar</span>\r\n          </div>\r\n        </div>\r\n\r\n        <nav className=\"flex-1 p-4 space-y-2\">\r\n          {[\r\n            { id: 'emitir', label: 'Emitir Credencial', icon: '‚ö°' },\r\n            { id: 'masiva', label: 'Emisi√≥n Masiva', icon: 'üìö' },\r\n            { id: 'credenciales', label: 'Historial', icon: 'clock' },\r\n            { id: 'designer', label: 'Dise√±ador Hologr√°fico', icon: 'üé®', color: 'text-purple-400' },\r\n            { id: 'analiticas', label: 'Mercado & Impacto', icon: 'üìà', color: 'text-pink-400' },\r\n            { id: 'recargar', label: 'Recargar Gas', icon: '‚õΩ', color: 'text-green-400' }\r\n          ].map(item => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => {\r\n                setActiveTab(item.id);\r\n                setSidebarOpen(false);\r\n              }}\r\n              className={`w-full text-left flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-white/5 transition-colors ${activeTab === item.id ? 'bg-white/10 border border-white/10 shadow-neon-blue' : ''} ${item.color || 'text-slate-300'}`}\r\n            >\r\n              <span>{item.icon}</span>\r\n              <span className=\"font-medium\">{item.label}</span>\r\n            </button>\r\n          ))}\r\n        </nav>\r\n\r\n        <div className=\"p-4 border-t border-slate-700/50 bg-black/20\">\r\n          <div className=\"text-xs font-mono text-slate-500 mb-2\">NETWORK STATUS</div>\r\n          <div className=\"space-y-2\">\r\n            {selectedNetworks.map(net => (\r\n              <div key={net} className=\"flex justify-between items-center text-xs\">\r\n                <span className=\"uppercase\">{net}</span>\r\n                <span className=\"text-green-400\">‚óè LIVE</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 relative overflow-y-auto h-full\">\r\n        {/* Header */}\r\n        <header className=\"sticky top-0 z-40 backdrop-blur-md bg-background/80 border-b border-slate-800 p-4 flex justify-between items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <button className=\"md:hidden text-slate-300\" onClick={() => setSidebarOpen(!sidebarOpen)}>‚ò∞</button>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold text-white\">Dashboard Institucional</h1>\r\n              {renderConnectionStatus()}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            {demo && (\r\n              <Link to=\"/\" className=\"px-3 py-1 bg-red-500/20 text-red-400 border border-red-500/50 rounded-lg text-xs font-bold hover:bg-red-500/30 transition-colors\">\r\n                Salir de la Demo\r\n              </Link>\r\n            )}\r\n            <div className=\"hidden md:flex flex-col items-end\">\r\n              <span className=\"text-sm font-medium text-slate-200\">Balance ACL</span>\r\n              <span className=\"text-xs font-mono text-primary-400\">{aclBalance} CREDITS</span>\r\n            </div>\r\n            <div className=\"h-10 w-10 rounded-full bg-gradient-to-tr from-primary to-secondary p-[2px]\">\r\n              <div className=\"h-full w-full rounded-full bg-black flex items-center justify-center font-bold text-white text-xs\">\r\n                INS\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"p-6 max-w-7xl mx-auto space-y-8\">\r\n\r\n          {/* Stats Row */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n            {[\r\n              { label: 'Credenciales Emitidas', value: stats?.totalCredentials || 1240, color: 'from-blue-500 to-cyan-500' },\r\n              { label: 'Tokens Activos', value: stats?.totalTokens || 3, color: 'from-purple-500 to-pink-500' },\r\n              { label: 'Destinatarios', value: stats?.totalRecipients || 850, color: 'from-green-500 to-emerald-500' },\r\n              { label: 'Integridad', value: '100%', color: 'from-orange-500 to-red-500' }\r\n            ].map((stat, i) => (\r\n              <div key={i} className=\"glass-card p-4 relative overflow-hidden group\">\r\n                <div className={`absolute top-0 right-0 w-24 h-24 bg-gradient-to-br ${stat.color} opacity-10 rounded-full -mr-10 -mt-10 blur-xl group-hover:opacity-20 transition-opacity`}></div>\r\n                <div className=\"text-sm text-slate-400\">{stat.label}</div>\r\n                <div className=\"text-2xl font-bold font-display mt-1\">{stat.value}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Dynamic Content Area */}\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n                key={activeTab}\r\n                initial={{ opacity: 0, x: 10 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                exit={{ opacity: 0, x: -10 }}\r\n                transition={{ duration: 0.2 }}\r\n            >\r\n                {renderContent()}\r\n            </motion.div>\r\n          </AnimatePresence>\r\n\r\n        </main>\r\n      </div>\r\n\r\n      {/* Subscription Modal */}\r\n      <AnimatePresence>\r\n        {showPlanModal && (\r\n            <InstitutionSubscriptionModal \r\n                onClose={() => setShowPlanModal(false)} \r\n                currentPlanId={currentPlan?.id}\r\n                onSubscribe={handleSubscribe}\r\n            />\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EnhancedInstitutionDashboard;\r\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\EnhancedStudentPortal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\FeatureCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\FeaturesSection.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\Footer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ForgotPassword.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\Header.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\HeroSection.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\HolographicStudio.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\HolographicStudio.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\HomePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\InstitutionAnalytics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\InstitutionCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\InstitutionDashboard.jsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadCredentials'. Either include it or remove the dependency array.","line":219,"column":6,"nodeType":"ArrayExpression","endLine":219,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [demo, loadCredentials, searchParams]","fix":{"range":[10071,10091],"text":"[demo, loadCredentials, searchParams]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\InstitutionSubscriptionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\InstitutionsPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\InteractiveTour.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\IssuanceSummary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\IssueTitleForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\Layout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\LiveBlockVisualizer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\LoginModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\LoginPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\NarrativeTemplateManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\PendingApproval.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\PendingInstitutions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\PlanUpgrade.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\PricingPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\Profile.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ProtectedRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ProtectedStudentRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\RateDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\RecentInstitutions.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\SmartCVPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\StatsChart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\StudentCertificateView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\StudentCredentials.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\StudentDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\StudentPortal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\StudentUpgradePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\SubscriptionManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\SystemLatencyChart.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\TourBadge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\UploadExcelForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\VerifyCredentialPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\Welcome.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\__tests__\\AccessibleList.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\__tests__\\AgentsSmoke.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\__tests__\\AuthCallback.redirect.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\__tests__\\CreatorIssuance.service.test.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\admin\\AdminRevocationPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\admin\\AuditDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\admin\\RevocationHistory.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\authService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\credentials\\CredentialEvidence.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\credentials\\CredentialVerifier.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\adminAPI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\connectionService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\demoService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\developerService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\institutionService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\issuanceService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\n8nService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\studentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\validationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\services\\verificationService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\themeConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\AiInsightsPanel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\Button.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\Card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\DocumentViewer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\ErrorReport.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\HederaStatus.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\LinkedInButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\LoadingSpinner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\ProgressTracker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\QRScanner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\StatusIndicator.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\ui\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\useAdmin.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\useAnalytics.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\useAuth.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\useHedera.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\useWebSocket.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\utils\\fileParser.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\utils\\ipfsUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\components\\utils\\xlsxSanitizer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\index.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\jest.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\setup-env.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\useAuth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\utils\\mockData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"C:\\Users\\Alumno.LAPTOP-72MR2U1M\\AcademicChain-Ledger\\client\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]}]